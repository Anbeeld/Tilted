var Tilted;(()=>{"use strict";var t,i,s,e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},h={};function r(t,i){return parseFloat(t.toFixed(i))}function n(t,i,s){return Math.min(s,Math.max(i,t))}function o(t){return n(t,-1,1)}function a(t,s=i.t){switch(s){case i.t:return t;case i.i:return Math.sqrt(1-Math.pow(t-1,2))}}function u(t,i,s,e){let h=[i],n=t/i,o=s-1,a=Math.pow(n,1/o);for(let t=1;t<s-1;t++)h.push(h[h.length-1]*a);h.push(t);for(let t=0;t<s;t++)h[t]=r(h[t],e);return h.reverse()}function l(t,i){return t.reduce((function(t,s){return Math.abs(s-i)<Math.abs(t-i)?s:t}))}e.d(h,{default:()=>V}),function(t){t.h="top",t.u="bottom",t.l="left",t.m="right",t.p="none"}(t||(t={})),function(t){t.t="linear",t.i="easeOutCirc"}(i||(i={})),function(t){t.v="angle",t._="color",t.T="integer",t.Number="number",t.$="length",t.M="time"}(s||(s={}));class c{static new(t){return c.A()?void 0!==t?c.S.push(new WeakRef(t)):c.S.push(void 0):void 0!==t?c.L.push(t):c.L.push(void 0),c.P(),c.V++}static get(t,i){if(t>c.V||t<c.O)return;let s;return s=c.A()?c.S[-c.O+t].deref():c.L[-c.O+t],void 0===i||s instanceof i?s:void 0}static unregister(t){t>c.V||t<c.O||(c.A()?c.S[-c.O+t]=void 0:c.L[-c.O+t]=void 0,c.P())}static A(){if(void 0===c.U){c.U=!0;try{new WeakRef(new Object)}catch(t){c.U=!1}}return c.U}static P(){let t=c.O;if(c.A()){for(let t=0;t<c.S.length&&void 0===c.S[t];t++)c.O+=1;c.O>t&&(c.S=c.S.slice(c.O-t))}else{for(let t=0;t<c.L.length&&void 0===c.L[t];t++)c.O+=1;c.O>t&&(c.L=c.L.slice(c.O-t))}}}c.V=0,c.O=0,c.U=void 0,c.S=[],c.L=[];const d=c;function f(t){return d.get(t,P)}class g{get I(){return f(this.D)}constructor(t){this.R=0,this.G=0,this.destroyed=!1,this.D=t,this.R=this.G=performance.now()}destroy(){this.destroyed=!0}}class m extends g{get N(){return{x:this.Y.x+this.k.x.value*this.k.x.sign,y:this.Y.y+this.k.y.value*this.k.y.sign}}get remaining(){return{x:(this.k.x.value-this.C.x)*this.k.x.sign,y:(this.k.y.value-this.C.y)*this.k.y.sign}}constructor(t,i,s,e){super(t),this.C={x:0,y:0},this.Y={x:this.I.position.coords.x,y:this.I.position.coords.y},this.k={x:{value:Math.abs(i.x),sign:i.x>0?1:-1},y:{value:Math.abs(i.y),sign:i.y>0?1:-1}},this.F=s,this.Z=e,this.I.j.W.X&&console.log("Glide created: x "+this.k.x.value*this.k.x.sign+", y "+this.k.y.value*this.k.y.sign+", initial.x "+this.Y.x+", initial.y "+this.Y.y+", target.x "+this.N.x+", target.y "+this.N.y)}step(t){if(this.destroyed)return!1;let i=o((t-this.R)/this.F),s=o(a(i,this.Z));if(s>=1)return this.I.j.W.X&&console.log("Glide finished: "+(t-this.R)+"ms, surface.coords.x "+this.I.position.coords.x+", surface.coords.y "+this.I.position.coords.y+", target.x "+this.N.x+", target.y "+this.N.y),this.I.position.moveTo({x:this.N.x,y:this.N.y}),!1;{let i={x:0,y:0};return this.k.x.value>0&&this.k.x.value>this.C.x&&(i.x=r(Math.max(0,this.k.x.value*s-this.C.x),this.I.j.B.X)),this.k.y.value>0&&this.k.y.value>this.C.y&&(i.y=r(Math.max(0,this.k.y.value*s-this.C.y),this.I.j.B.X)),(i.x>0||i.y>0)&&(this.I.position.move({x:i.x*this.k.x.sign,y:i.y*this.k.y.sign},this.I.j.B.X,this.I.j.B.X),this.C.x=r(this.C.x+i.x,this.I.j.B.X),this.C.y=r(this.C.y+i.y,this.I.j.B.X),this.G=t),!0}}}class p extends g{get N(){return this.Y+this.H.value*this.H.sign}get remaining(){return(this.H.value-this.C)*this.H.sign}constructor(t,i,s,e){super(t),this.C=0,this.Y=this.I.scale.value,this.H={value:Math.abs(i),sign:i>0?1:-1},this.F=s,this.Z=e,this.I.j.W.X&&console.log("Zoom created: shift "+this.H.value+", initial "+this.Y+", target "+this.N)}step(t){if(this.destroyed)return!1;let i=o((t-this.R)/this.F),s=o(a(i,this.Z));if(s>=1)return this.I.j.W.X&&console.log("Zoom finished: "+(t-this.R)+"ms, surface.scale.value "+this.I.scale.value+", target "+this.N),this.I.scale.changeTo(this.N),!1;{let i=0;return this.H.value>0&&this.H.value>this.C&&(i=r(Math.max(0,this.H.value*s-this.C),this.I.j.q.X)),i>0&&(this.I.scale.change(i*this.H.sign),this.C=r(this.C+i,this.I.j.q.X),this.G=t),!0}}}class x extends g{constructor(t,i){super(t),this.k=i}update(t){this.k.x!==t.x&&(this.k.x=t.x),this.k.y!==t.y&&(this.k.y=t.y)}step(t){if(this.destroyed)return!1;let i=Math.max(1,t-this.G)/10,s=this.I.j.J.X*this.k.x/this.I.scale.value*i,e=this.I.j.J.X*this.k.y/this.I.scale.value*i;return this.G=t,this.I.position.move({x:s,y:e})}}class E extends g{constructor(t,i){super(t),this.id=d.new(this),this.K={x:0,y:0},this.tt={x:0,y:0},this.I.cancelOngoingMoves(),this.K={x:i.x,y:i.y}}step(t){let i=this.I.position.move({x:(this.K.x-t.x)/this.I.scale.value,y:(this.K.y-t.y)/this.I.scale.value});return this.tt={x:this.tt.x+this.K.x-t.x,y:this.tt.y+this.K.y-t.y},this.K={x:t.x,y:t.y},i}destroy(){performance.now()-this.R<this.I.j.it.X&&this.st(),this.destroyed=!0}st(){this.I.position.glide({x:this.tt.x*this.I.j.et.X/this.I.scale.value,y:this.tt.y*this.I.j.et.X/this.I.scale.value},this.I.j.ht.X,i.i)}}var y,v;!function(t){t.rt="surfaceGlide",t.nt="surfaceZoom",t.ot="surfaceEdge",t.ut="surfaceDrag"}(y||(y={}));class _{get I(){return f(this.D)}get surfaceGlide(){return this.lt}get surfaceZoom(){return this.ct}get surfaceEdge(){return this.dt}get surfaceDrag(){return this.ft}constructor(t){this.lt=null,this.ct=null,this.dt=null,this.ft=null,this.D=t}create(t,i){switch(t){case y.rt:this.gt(...i);break;case y.nt:this.xt(...i);break;case y.ot:this.Et(...i);break;case y.ut:this.yt(...i)}this.I.animationExecutor.initiate()}destroy(t){switch(t){case y.rt:return this.vt();case y.nt:return this._t();case y.ot:return this.Tt();case y.ut:return this.$t()}}exists(t){switch(t){case y.rt:return this.wt();case y.nt:return this.Mt();case y.ot:return this.At();case y.ut:return this.bt()}}gt(t,i,s){this.vt(),this.lt=new m(this.I.id,t,i,s)}vt(){this.wt()&&(this.lt.destroy(),this.lt=null)}wt(){return null!==this.lt}xt(t,i,s){this._t(),this.ct=new p(this.I.id,t,i,s)}_t(){this.Mt()&&(this.ct.destroy(),this.ct=null)}Mt(){return null!==this.ct}Et(t){this.vt(),this.Tt(),this.dt=new x(this.I.id,t)}Tt(){this.At()&&(this.dt.destroy(),this.dt=null)}At(){return null!==this.dt}yt(t){this.$t(),this.ft=new E(this.I.id,t)}$t(){this.bt()&&(this.ft.destroy(),this.ft=null)}bt(){return null!==this.ft}}function T(t,i){let s=i.elements.container.getBoundingClientRect(),e=window.TouchEvent&&t instanceof TouchEvent;return{button:e?0:t.button,x:e?t.touches[0].clientX-s.left:t.clientX-s.left,y:e?t.touches[0].clientY-s.top:t.clientY-s.top}}function $(t,i){let s=T(t,i);0===s.button&&i.animationStorage.create(y.ut,[s])}function w(i){i.elements.container.addEventListener("mousemove",(s=>{!function(i,s){1===s.j.St.X&&function(i,s){if(i.animationStorage.exists(y.ut))return!1;let e={x:t.p,y:t.p};s.y<=i.j.Lt.X?s.x<=i.j.Lt.X?(e.x=t.l,e.y=t.h):s.x>=i.containerWidth-i.j.Lt.X?(e.x=t.m,e.y=t.h):e.y=t.h:s.y>=i.containerHeight-i.j.Lt.X?s.x<=i.j.Lt.X?(e.x=t.l,e.y=t.u):s.x>=i.containerWidth-i.j.Lt.X?(e.x=t.m,e.y=t.u):e.y=t.u:s.x<=i.j.Lt.X?e.x=t.l:s.x>=i.containerWidth-i.j.Lt.X&&(e.x=t.m);let h=0,r=0;e.y===t.p&&e.x===t.p||(e.y===t.h?r=(i.j.Lt.X+1-s.y)/(i.j.Lt.X+1)*-1:e.y===t.u&&(r=(i.j.Lt.X+1-(i.containerHeight-s.y))/(i.j.Lt.X+1)),e.x===t.l?h=(i.j.Lt.X+1-s.x)/(i.j.Lt.X+1)*-1:e.x===t.m&&(h=(i.j.Lt.X+1-(i.containerWidth-s.x))/(i.j.Lt.X+1)));let n=!1;(0===h||h>0&&i.position.coords.x>=i.position.max.x||h<0&&i.position.coords.x<=i.position.min.x)&&(n=!0);let o=!1;(0===r||r>0&&i.position.coords.y>=i.position.max.y||r<0&&i.position.coords.y<=i.position.min.y)&&(o=!0),n&&o?i.animationStorage.exists(y.ot)&&i.animationStorage.destroy(y.ot):i.animationStorage.exists(y.ot)?i.animationStorage.surfaceEdge.update({x:h,y:r}):i.animationStorage.create(y.ot,[{x:h,y:r}])}(s,T(i,s))}(s,i)})),i.elements.container.addEventListener("wheel",(t=>{!function(t,i){t.preventDefault(),i.scale.stepAndGlide(function(t){return{x:t.deltaX,y:t.deltaY}}(t).y<0?1:-1,T(t,i))}(t,i)})),function(t){function i(i){t.animationStorage.exists(y.ut)&&t.animationStorage.surfaceDrag.step(T(i,t))}function s(){t.animationStorage.destroy(y.ut)}t.elements.container.addEventListener("mousemove",i),t.elements.container.addEventListener("touchmove",i),document.body.addEventListener("mouseup",s),document.body.addEventListener("touchend",s)}(i),i.elements.container.addEventListener("mousedown",(t=>{$(t,i)})),i.elements.container.addEventListener("touchstart",(t=>{$(t,i)})),document.body.addEventListener("keydown",(t=>{!function(t,i){i.elements.container.matches(":hover")&&("Add"===t.key||"+"===t.key?i.scale.step(1):"Subtract"!==t.key&&"-"!==t.key||i.scale.step(-1))}(t,i)})),i.elements.controlsZoomIn.addEventListener("click",(()=>{i.scale.stepAndGlide(1)})),i.elements.controlsZoomOut.addEventListener("click",(()=>{i.scale.stepAndGlide(-1)})),i.elements.container.ondragstart=()=>!1}class M{get I(){return f(this.D)}constructor(t){this.Pt=!1,this.D=t}initiate(){this.Pt||(this.Pt=!0,this.Vt())}Vt(){let t=performance.now();requestAnimationFrame((()=>{let i=this.Ot(t),s=this.Ut(t),e=this.It(t);this.I.applyTransformProperty(),this.Pt=i||s||e,this.Pt&&this.Vt()}))}Ot(t){if(!this.I.animationStorage.exists(y.rt))return!1;let i=this.I.animationStorage.surfaceGlide.step(t);return i||this.I.animationStorage.destroy(y.rt),i}Ut(t){if(!this.I.animationStorage.exists(y.nt))return!1;let i=this.I.animationStorage.surfaceZoom.step(t);return i||this.I.animationStorage.destroy(y.nt),i}It(t){if(!this.I.animationStorage.exists(y.ot))return!1;let i=this.I.animationStorage.surfaceEdge.step(t);return i||this.I.animationStorage.destroy(y.ot),i}}function A(t){return"@property --tilted-container-width-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.containerWidth+"px;}@property --tilted-container-height-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.containerHeight+"px;}@property --tilted-surface-width-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.surfaceWidth+"px;}@property --tilted-surface-height-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.surfaceHeight+"px;}"}class b{get I(){return f(this.D)}constructor(t){this.Dt=[],this.Rt=[],this.D=t,this.Dt=u(this.I.j.zt.X,this.I.j.Gt.X,this.I.j.Nt.X,this.I.j.q.X),this.Rt=function(t,i){let s=[];for(let e=0;e<t.length;e++)s.push({up:e===t.length-1?0:r(t[e+1]-t[e],i),down:0===e?0:r(t[e]-t[e-1],i)});return s}(this.Dt,this.I.j.q.X),this.Yt=this.Dt[this.I.j.kt.X-1],this.I.updateRotate(this.Yt),this.Ct(!0)}get value(){return this.Yt}get Ft(){return this.I.animationStorage.exists(y.nt)?this.I.animationStorage.surfaceZoom.remaining:0}get Zt(){return n(r(this.I.scale.value+this.Ft,this.I.j.q.X),this.I.j.zt.X,this.I.j.Gt.X)}Xt(t){return this.Dt.indexOf(l(this.Dt,null!=t?t:this.Yt))}Wt(t,i){return void 0===i&&(i=this.Zt),t?this.Rt[this.Xt(i)].up:this.Rt[this.Xt(i)].down}jt(t,i,s){void 0===s&&(s=this.Zt);let e=i?1:-1,h=i?s+this.I.scale.Wt(!0):s,n=15/this.I.j.Nt.X*.105*this.I.j.Bt.X/h;return{x:r((t.x-this.I.containerWidth/2)*n,this.I.j.Ht.X)*e,y:r((t.y-this.I.containerHeight/2)*n,this.I.j.Ht.X)*e}}qt(t){return l(this.Dt,n(this.I.scale.value+this.Ft+t,this.I.j.zt.X,this.I.j.Gt.X))-this.I.scale.value-this.Ft}Ct(t=!1){this.I.setTransformValues([{name:"scale",value:this.Yt.toString()},{name:"rotateX",value:this.I.rotate.x+"deg"}],t)}change(t,i=this.I.j.q.X){if(0===t)return!1;if(i>=0&&(t=r(t,i)),0===t)return!1;let s;return s=i>=0?r(this.Yt+t,i):this.Yt+t,s=n(s,this.I.j.zt.X,this.I.j.Gt.X),s!==this.Yt&&(this.Yt=s,this.I.updateRotate(),this.Ct(),!0)}changeTo(t,i=this.I.j.q.X){return i>=0&&(t=r(t,i)),this.Yt!==t&&this.change(t-this.Yt,i)}zoom(t,s=this.I.j.Jt.X,e=i.i,h=this.I.j.q.X){let n=t;if(0===t)return!1;if(0===(t=this.qt(t)))return!1;if(h>=0&&(t=r(t,h)),0===t)return!1;let a=t;return t+=this.Ft,s*=o(Math.abs(t/n)),this.I.animationStorage.create(y.nt,[t,s,e]),{new:a,combined:t,time:s}}zoomTo(t,s=this.I.j.Jt.X,e=i.i){return this.Yt!==t&&!1!==this.zoom(t-this.Yt,s,e,-1)}step(t){let i=t>0;return!1!==this.I.scale.zoom(t*this.I.scale.Wt(i))}stepAndGlide(t,i=null){let s=t>0;if(s&&this.Zt===this.I.j.Gt.X||!s&&this.Zt===this.I.j.zt.X)return;let e=this.Wt(s),h=this.Zt,r=t*e,n=this.zoom(r);if(!1!==n&&null!==i&&!this.I.animationStorage.exists(y.ot)){let t=this.I.scale.jt(i,s,h),e=Math.abs(n.new/r);t.x*=e,t.y*=e,this.I.position.glide(t,n.time)}}}class S{get I(){return f(this.D)}get coords(){return{x:this.Kt.x,y:this.Kt.y}}constructor(t){this.Kt={x:0,y:0},this.D=t}get Qt(){return{x:Math.round(this.I.surfaceWidth/2-.25*this.I.containerWidth),y:Math.round(this.I.surfaceHeight/2-.25*this.I.containerHeight)}}get limit(){return this.Qt}get min(){return{x:-1*this.Qt.x,y:-1*this.Qt.y}}get max(){return{x:this.Qt.x,y:this.Qt.y}}get Ft(){return this.I.animationStorage.exists(y.rt)?this.I.animationStorage.surfaceGlide.remaining:{x:0,y:0}}move(t,i=this.I.j.B.X,s=this.I.j.Ht.X){if(0===t.x&&0===t.y)return!1;if(i>=0&&(t.x=r(t.x,i),t.y=r(t.y,i)),0===t.x&&0===t.y)return!1;let e;return e=s>=0?{x:r(this.Kt.x+t.x,s),y:r(this.Kt.y+t.y,s)}:{x:this.Kt.x+t.x,y:this.Kt.y+t.y},e={x:n(e.x,this.min.x,this.max.x),y:n(e.y,this.min.y,this.max.y)},(e.x!==this.Kt.x||e.y!==this.Kt.y)&&(this.Kt=e,this.I.setTransformValues([{name:"translate3d",value:-1*this.Kt.x+"px, "+-1*this.Kt.y+"px, 0"}]),!0)}moveTo(t,i=this.I.j.Ht.X){return i>=0&&(t={x:r(t.x,i),y:r(t.y,i)}),(this.Kt.x!==t.x||this.Kt.y!==t.y)&&this.move({x:t.x-this.Kt.x,y:t.y-this.Kt.y},-1,i)}glide(t,s=this.I.j.ti.X,e=i.i,h=this.I.j.B.X,o=this.I.j.Ht.X){if(0===t.x&&0===t.y)return!1;if(h>=0&&(t={x:r(t.x,h),y:r(t.y,h)}),0===t.x&&0===t.y)return!1;let a;return a=o>=0?{x:r(this.Kt.x+t.x,o),y:r(this.Kt.y+t.y,o)}:{x:this.Kt.x+t.x,y:this.Kt.y+t.y},!(0===(t={x:n(a.x,this.min.x,this.max.x)-this.Kt.x,y:n(a.y,this.min.y,this.max.y)-this.Kt.y}).x&&0===t.y||(h>=0&&(t={x:r(t.x,h),y:r(t.y,h)}),0===t.x&&0===t.y||(this.I.j.W.X&&this.I.log([{desc:"glide coords.x",to:t.x},{desc:"glide coords.y",to:t.y}]),t={x:r(t.x+this.Ft.x,h),y:r(t.y+this.Ft.y,h)},this.I.animationStorage.create(y.rt,[{x:t.x,y:t.y},s,e]),0)))}glideTo(t,s=this.I.j.ti.X,e=i.i,h=this.I.j.Ht.X){return h>=0&&(t={x:r(t.x,h),y:r(t.y,h)}),(this.Kt.x!==t.x||this.Kt.y!==t.y)&&this.glide({x:t.x-this.Kt.x,y:t.y-this.Kt.y},s,e,-1,h)}enforceLimits(){this.moveTo({x:n(this.Kt.x,this.min.x,this.max.x),y:n(this.Kt.y,this.min.y,this.max.y)})}}!function(t){t.ii="scene",t.si="figure"}(v||(v={}));class L{get I(){return f(this.D)}constructor(t,i){if(this.V=d.new(this),this.D=t,this.ei=i.type,this.hi=i.factor||1,this.ri=i.element,!this.I.elements.transform.contains(this.ri))throw new Error(`Tilted id ${this.I.id} transform element doesn't contain entity id ${this.V} element`);let s;for(this.ei===v.ii?(this.ri.classList.add(`tilted-${this.D}-scene`),this.ri.classList.add(`tilted-${this.D}-scene-${this.V}`)):this.ei===v.si&&(this.ri.classList.add(`tilted-${this.D}-figure`),this.ri.classList.add(`tilted-${this.D}-figure-${this.V}`)),this.ei===v.ii?s=this.ri:this.ei===v.si&&(s=this.ri.parentElement);s!==this.I.elements.transform;){if(!s)throw new Error(`Couldn't reach Tilted id ${this.I.id} transform element from entity id ${this.V}`);s.classList.add(`tilted-${this.D}-preserve-3d`),s=s.parentElement}}ni(){this.oi||(this.oi=document.createElement("style"),this.oi.classList.add(`tilted-${this.I.id}-css-${this.ei}-${this.V}`),document.head.appendChild(this.oi))}applyTransformProperty(t){let i=`rotateX(-${1===this.hi?t:(s=t,e=this.hi,h=this.I.j.ai.X,r(parseFloat(s.replace("deg",""))*e,h)+"deg")})`;var s,e,h;if(this.ei===v.ii){this.ni();let t=`.tilted-${this.D}-scene-${this.V}>*:not(.tilted-${this.D}-figure){transform:${i}}`;this.oi.innerHTML!==t&&(this.oi.innerHTML=t)}else this.ei===v.si&&(this.ri.style.transform=i)}}class P{get id(){return this.V}get elements(){return this.ui}get position(){return this.li}get scale(){return this.ci}get animationExecutor(){return this.di}get animationStorage(){return this.fi}get rotate(){return{x:this.gi.x,y:this.gi.y}}constructor(t,i,e={},h=[]){this.mi={x:0,y:0},this.gi={x:0,y:0},this.V=d.new(this),this.j=function(t){let i={debugMode:0,scaleMin:.25,scaleMax:1,scaleNumSteps:15,scaleDefaultStep:8,scaleRounding:3,scaleGlideFactor:1,perspectiveValue:750,perspectiveFactor:1,tiltMin:0,tiltMax:35,tiltRounding:2,edgeMoveEnabled:0,edgeMoveArea:20,edgeMoveSpeed:10,animationScaleTime:400,animationGlideTime:400,durationForToss:150,tossGlideFactor:1,animationTossTime:1e3,coordRoundingInterim:1,coordRoundingFinal:0};for(const s in t)if(i.hasOwnProperty(s)){let e=t[s];!0===e?e=1:!1===e&&(e=0),i[s]=e}let e=u(i.scaleMin,i.scaleMax,i.scaleNumSteps,i.scaleRounding);return i.debugMode&&console.log("Scale steps: ",e),{W:{X:i.debugMode,pi:s.T},zt:{X:i.scaleMin,pi:s.Number},Gt:{X:i.scaleMax,pi:s.Number},Nt:{X:i.scaleNumSteps,pi:s.Number},kt:{X:i.scaleDefaultStep,pi:s.Number},q:{X:i.scaleRounding,pi:s.Number},Bt:{X:i.scaleGlideFactor,pi:s.Number},xi:{X:i.perspectiveValue,pi:s.T},Ei:{X:Math.round(i.perspectiveFactor),pi:s.$},yi:{X:Math.round(i.tiltMin),pi:s.v},_i:{X:Math.round(i.tiltMax),pi:s.v},ai:{X:i.tiltRounding,pi:s.T},St:{X:i.edgeMoveEnabled,pi:s.T},Lt:{X:Math.round(i.edgeMoveArea),pi:s.$},J:{X:Math.round(i.edgeMoveSpeed),pi:s.$},Jt:{X:Math.round(i.animationScaleTime),pi:s.M},ti:{X:Math.round(i.animationGlideTime),pi:s.M},it:{X:Math.round(i.durationForToss),pi:s.M},et:{X:i.tossGlideFactor,pi:s.Number},ht:{X:Math.round(i.animationTossTime),pi:s.M},B:{X:i.coordRoundingInterim,pi:s.T},Ht:{X:i.coordRoundingFinal,pi:s.T}}}(e),this.ui=this.Ti(t,i),this.$i=this.wi(),this.Mi={changed:!1,values:{scale:"",perspective:"",rotateX:"",translate3d:"0, 0, 0"}},this.fi=new _(this.id),this.di=new M(this.id),w(this),this.Ai(),new ResizeObserver((()=>{this.bi(),this.Ai(),this.li.enforceLimits()})).observe(this.elements.container),new ResizeObserver((()=>{this.bi(),this.li.enforceLimits()})).observe(this.elements.surface),this.Si=[];for(let t of h)this.Si.push(new L(this.id,t));this.li=new S(this.id),this.Li(),this.ci=new b(this.id)}Ti(t,i){t.classList.add(`tilted-${this.id}-container`);let s=document.createElement("div");s.classList.add(`tilted-${this.id}-viewport`);let e=document.createElement("div");e.classList.add(`tilted-${this.id}-transform`),e.classList.add(`tilted-${this.id}-preserve-3d`),i.classList.add(`tilted-${this.id}-surface`);let h=document.createElement("div");h.classList.add(`tilted-${this.id}-controls`);let r=document.createElement("div");r.classList.add(`tilted-${this.id}-controls-zoom-in`);let n=document.createElement("div");n.classList.add(`tilted-${this.id}-controls-zoom-out`),h.appendChild(r),h.appendChild(n);let o=new Array;for(let i of t.children)o.push(i);for(let t of o)e.appendChild(t);return i.parentElement!==e&&e.appendChild(i),s.appendChild(e),t.appendChild(s),t.appendChild(h),{container:t,controls:h,controlsZoomIn:r,controlsZoomOut:n,viewport:s,transform:e,surface:i}}wi(){let t=document.createElement("style");t.classList.add(`tilted-${this.id}-css-static`),t.innerHTML=function(t){let i="";for(const s in t.j){let e="";"length"===t.j[s].pi?e="px":"angle"===t.j[s].pi?e="deg":"time"===t.j[s].pi&&(e="ms"),i+=`@property --${s} { `,i+=`syntax:"<${t.j[s].pi}>"; `,i+="inherits:true; ",i+=`initial-value:${t.j[s].X}${e}; } `}return i+=`.tilted-${t.id}-container{position:relative !important;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tilted-${t.id}-container:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing;}.tilted-${t.id}-controls{position:absolute;top:100px;right:30px;width:30px;border-radius:8px;box-shadow:rgba(0, 0, 0, 0.16) 0px 1px 4px;box-sizing:content-box;overflow:hidden;}.tilted-${t.id}-controls-zoom-in,.tilted-${t.id}-controls-zoom-out{position:relative;width:30px;height:30px;background:#ffffffcc;cursor:pointer;box-sizing:content-box;}.tilted-${t.id}-controls-zoom-in{border-bottom:1px solid #444444;}.tilted-${t.id}-controls-zoom-in:active,.tilted-${t.id}-controls-zoom-out:active{background:#ffffff;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-in:after,.tilted-${t.id}-controls-zoom-out:before{content:"";display:block;position:absolute;background:#444444;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-out:before{height:2px;width:18px;top:14px;left:6px;}.tilted-${t.id}-controls-zoom-in:after{height:18px;width:2px;top:6px;left:14px;}.tilted-${t.id}-viewport{width:var(--tilted-surface-width-`+t.id+") !important;height:var(--tilted-surface-height-"+t.id+") !important;position:relative !important;will-change:top,left;}"+`.tilted-${t.id}-transform{width:var(--tilted-surface-width-`+t.id+") !important;height:var(--tilted-surface-height-"+t.id+") !important;will-change:transform;}"+`.tilted-${t.id}-surface{position:relative !important;overflow:visible !important;z-index:100 !important;}`+`.tilted-${t.id}-scene>*:not(.tilted-${t.id}-figure),`+`.tilted-${t.id}-figure{transform-origin:bottom;}`+`.tilted-${t.id}-preserve-3d{transform-style:preserve-3d;}`,i}(this),document.head.appendChild(t);let i=document.createElement("style");return i.classList.add(`tilted-${this.id}-css-dynamic`),i.innerHTML=A(this),document.head.appendChild(i),{static:t,dynamic:i}}bi(){this.$i.dynamic.innerHTML=A(this)}get containerWidth(){return this.elements.container.offsetWidth}get containerHeight(){return this.elements.container.offsetHeight}get surfaceWidth(){return this.elements.surface.offsetWidth}get surfaceHeight(){return this.elements.surface.offsetHeight}setTransformValues(t,i=!1){for(let{name:i,value:s}of t)this.Mi.values.hasOwnProperty(i)&&(this.Mi.values[i]=s);i?this.applyTransformProperty(!0):(this.Mi.changed=!0,this.di.initiate())}applyTransformProperty(t=!1){if(this.Mi.changed||t){this.Mi.changed=!1,this.ui.transform.style.transform=`scale(${this.Mi.values.scale}) perspective(${this.Mi.values.perspective}) rotateX(${this.Mi.values.rotateX}) translate3d(${this.Mi.values.translate3d})`;for(let t of this.Si)t.applyTransformProperty(this.Mi.values.rotateX)}}Ai(){this.mi={x:0-this.surfaceWidth/2+this.containerWidth/2,y:0-this.surfaceHeight/2+this.containerHeight/2},this.elements.viewport.style.top=this.mi.y+"px",this.elements.viewport.style.left=this.mi.x+"px"}Li(){this.setTransformValues([{name:"perspective",value:Math.round(this.j.xi.X*this.j.Ei.X).toString()+"px"}])}updateRotate(t=null){null===t&&(t=this.scale.value);let i=(t-this.j.zt.X)/(this.j.Gt.X-this.j.zt.X);this.gi={x:r(this.j.yi.X+i*(this.j._i.X-this.j.yi.X),this.j.ai.X),y:0}}log(t=!1){if(0===this.j.W.X)return;let i="";if(t)for(let s of t)i+=s.desc+(void 0!==s.from?" from "+s.from:"")+(void 0!==s.to?" to "+s.to:"")+"\n";console.log(i+`x: ${this.li.coords.x}\n`+`y: ${this.li.coords.y}\n`+`limit.x: ${this.li.limit.x}\n`+`limit.y: ${this.li.limit.y}\n`+`scale: ${this.scale.value}`)}cancelOngoingMoves(){this.fi.destroy(y.rt)}}const V=P;Tilted=h.default})();