var Tilted;(()=>{"use strict";var t={d:(i,s)=>{for(var e in s)t.t(s,e)&&!t.t(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:s[e]})},t:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},i={};(()=>{function s(t,i){return parseFloat(t.toFixed(i))}var e,h,r,n,o;function u(t,i,s){return Math.min(s,Math.max(i,t))}function a(t){return u(t,0,1)}function l(t,i=h.i){switch(i){case h.i:return t;case h.h:return Math.sqrt(1-Math.pow(t-1,2))}}function c(t,i){return t.reduce((function(t,s){return Math.abs(s-i)<Math.abs(t-i)?s:t}))}t.d(i,{default:()=>L}),function(t){t.o="top",t.u="bottom",t.l="left",t.m="right",t.p="none"}(e||(e={})),function(t){t.i="linear",t.h="easeOutCirc"}(h||(h={})),function(t){t.$="angle",t.v="color",t.T="integer",t.Number="number",t.M="length",t.A="time"}(r||(r={}));class d{static id(){return d.S++}static add(t){d.L.set(t.id,t)}static _(t){return d.L.get(t)}}d.S=0,d.L=new Map;class f{get _(){return d._(this.V)}constructor(t){this.P=-1,this.I=-1,this.O=!1,this.V=t}U(t){(this.P<0||this.I<0)&&(t||(t=performance.now()),this.P=t,this.I=t)}destroy(){this.O=!0}}class m extends f{get target(){return{x:this.D.x+this.N.x.value*this.N.x.sign,y:this.D.y+this.N.y.value*this.N.y.sign}}get R(){return{x:(this.N.x.value-this.G.x)*this.N.x.sign,y:(this.N.y.value-this.G.y)*this.N.y.sign}}constructor(t,i,s,e){super(t),this.G={x:0,y:0},this.D={x:this._.position.coords.x,y:this._.position.coords.y},this.N={x:{value:Math.abs(i.x),sign:i.x>0?1:-1},y:{value:Math.abs(i.y),sign:i.y>0?1:-1}},this.Y=s,this.C=e}k(t){this.zoom=t}F(t){if(!this.zoom)return t;if(this.zoom.D===this.zoom.target)return t;const i=this.zoom.D/this.zoom.target;return t/(i+t*(1-i))}step(t){if(this.O)return!1;this.U(t);let i=a((t-this.P)/this.Y),e=a(this.F(l(i,this.C)));if(e>=1)return this._.position.moveTo({x:this.target.x,y:this.target.y}),!1;{let i={x:0,y:0};return this.N.x.value>0&&this.N.x.value>this.G.x&&(i.x=s(Math.max(0,this.N.x.value*e-this.G.x),this._.j.X.Z)),this.N.y.value>0&&this.N.y.value>this.G.y&&(i.y=s(Math.max(0,this.N.y.value*e-this.G.y),this._.j.X.Z)),(i.x>0||i.y>0)&&(this._.position.move({x:i.x*this.N.x.sign,y:i.y*this.N.y.sign},this._.j.X.Z,this._.j.X.Z),this.G.x=s(this.G.x+i.x,this._.j.X.Z),this.G.y=s(this.G.y+i.y,this._.j.X.Z),this.I=t),!0}}}class g extends f{set D(t){this.B=t}get D(){return this.B}get target(){return this.D+this.shift.value*this.shift.sign}get R(){return(this.shift.value-this.G)*this.shift.sign}constructor(t,i,s,e){super(t),this.G=0,this.D=this._.scale.value,this.shift={value:Math.abs(i),sign:i>0?1:-1},this.Y=s,this.C=e}step(t){if(this.O)return!1;this.U(t);let i=a((t-this.P)/this.Y),e=a(l(i,this.C));if(e>=1)return this._.scale.W(this.target),!1;{let i=0;return this.shift.value>0&&this.shift.value>this.G&&(i=s(Math.max(0,this.shift.value*e-this.G),this._.j.H.Z)),i>0&&(this._.scale.q(i*this.shift.sign),this.G=s(this.G+i,this._.j.H.Z),this.I=t),!0}}}class p extends f{constructor(t,i){super(t),this.N=i}update(t){this.N.x!==t.x&&(this.N.x=t.x),this.N.y!==t.y&&(this.N.y=t.y)}step(t){if(this.O)return!1;this.U(t);let i=Math.max(1,t-this.I)/10,s=this._.j.J.Z*this.N.x/this._.scale.value*i,e=this._.j.J.Z*this.N.y/this._.scale.value*i;return this.I=t,this._.position.move({x:s,y:e})}}class x extends f{constructor(t,i){super(t),this.id=d.id(),this.K={x:0,y:0},this.tt={x:0,y:0},this._.it(),this.K={x:i.x,y:i.y}}step(t){this.U();let i=this._.position.move({x:(this.K.x-t.x)/this._.scale.value,y:(this.K.y-t.y)/this._.scale.value});return this.tt={x:this.tt.x+this.K.x-t.x,y:this.tt.y+this.K.y-t.y},this.K={x:t.x,y:t.y},i}destroy(){performance.now()-this.P<this._.j.st.Z&&this.et(),this.O=!0}et(){this._.position.ht({x:this.tt.x*this._.j.rt.Z/this._.scale.value,y:this.tt.y*this._.j.rt.Z/this._.scale.value},this._.j.nt.Z,h.h)}}!function(t){t.ot="surfaceGlide",t.ut="surfaceZoom",t.lt="surfaceEdge",t.ct="surfaceDrag"}(n||(n={}));class E{get _(){return d._(this.V)}set dt(t){this.ft=t}get dt(){return this.ft}set gt(t){this.xt=t}get gt(){return this.xt}set Et(t){this.$t=t}get Et(){return this.$t}set yt(t){this.vt=t}get yt(){return this.vt}constructor(t){this.ft=null,this.xt=null,this.$t=null,this.vt=null,this.V=t}create(t,i){switch(t){case n.ot:this.Tt(...i);break;case n.ut:this.Mt(...i);break;case n.lt:this.wt(...i);break;case n.ct:this.At(...i)}this._.St.bt()}destroy(t){switch(t){case n.ot:return this.Lt();case n.ut:return this._t();case n.lt:return this.Vt();case n.ct:return this.Pt()}}It(t){switch(t){case n.ot:return this.Ot();case n.ut:return this.Ut();case n.lt:return this.Dt();case n.ct:return this.zt()}}Tt(t,i,s){this.Lt(),this.dt=new m(this._.id,t,i,s)}Lt(){this.Ot()&&(this.dt.destroy(),this.dt=null)}Ot(){return null!==this.dt}Mt(t,i,s){this._t(),this.gt=new g(this._.id,t,i,s)}_t(){this.Ut()&&(this.gt.destroy(),this.gt=null)}Ut(){return null!==this.gt}wt(t){this.Lt(),this.Vt(),this.Et=new p(this._.id,t)}Vt(){this.Dt()&&(this.Et.destroy(),this.Et=null)}Dt(){return null!==this.Et}At(t){this.Pt(),this.yt=new x(this._.id,t)}Pt(){this.zt()&&(this.yt.destroy(),this.yt=null)}zt(){return null!==this.yt}}function $(t,i){let s=i.elements.container.getBoundingClientRect(),e=window.TouchEvent&&t instanceof TouchEvent;return{button:e?0:t.button,x:e?t.touches[0].clientX-s.left:t.clientX-s.left,y:e?t.touches[0].clientY-s.top:t.clientY-s.top}}function y(t,i){let s=$(t,i);0===s.button&&i.Nt.create(n.ct,[s])}function v(t){t.elements.container.addEventListener("mousemove",(i=>{!function(t,i){1===i.j.Rt.Z&&function(t,i){if(t.Nt.It(n.ct))return!1;let s={x:e.p,y:e.p};i.y<=t.j.Gt.Z?i.x<=t.j.Gt.Z?(s.x=e.l,s.y=e.o):i.x>=t.Yt-t.j.Gt.Z?(s.x=e.m,s.y=e.o):s.y=e.o:i.y>=t.Ct-t.j.Gt.Z?i.x<=t.j.Gt.Z?(s.x=e.l,s.y=e.u):i.x>=t.Yt-t.j.Gt.Z?(s.x=e.m,s.y=e.u):s.y=e.u:i.x<=t.j.Gt.Z?s.x=e.l:i.x>=t.Yt-t.j.Gt.Z&&(s.x=e.m);let h=0,r=0;s.y===e.p&&s.x===e.p||(s.y===e.o?r=(t.j.Gt.Z+1-i.y)/(t.j.Gt.Z+1)*-1:s.y===e.u&&(r=(t.j.Gt.Z+1-(t.Ct-i.y))/(t.j.Gt.Z+1)),s.x===e.l?h=(t.j.Gt.Z+1-i.x)/(t.j.Gt.Z+1)*-1:s.x===e.m&&(h=(t.j.Gt.Z+1-(t.Yt-i.x))/(t.j.Gt.Z+1)));let o=!1;(0===h||h>0&&t.position.coords.x>=t.position.max.x||h<0&&t.position.coords.x<=t.position.min.x)&&(o=!0);let u=!1;(0===r||r>0&&t.position.coords.y>=t.position.max.y||r<0&&t.position.coords.y<=t.position.min.y)&&(u=!0),o&&u?t.Nt.It(n.lt)&&t.Nt.destroy(n.lt):t.Nt.It(n.lt)?t.Nt.Et.update({x:h,y:r}):t.Nt.create(n.lt,[{x:h,y:r}])}(i,$(t,i))}(i,t)})),t.elements.container.addEventListener("wheel",(i=>{!function(t,i){t.preventDefault(),i.scale.kt(function(t){return{x:t.deltaX,y:t.deltaY}}(t).y<0?1:-1,$(t,i))}(i,t)})),function(t){function i(i){t.Nt.It(n.ct)&&t.Nt.yt.step($(i,t))}function s(){t.Nt.destroy(n.ct)}t.elements.container.addEventListener("mousemove",i),t.elements.container.addEventListener("touchmove",i),document.body.addEventListener("mouseup",s),document.body.addEventListener("touchend",s)}(t),t.elements.container.addEventListener("mousedown",(i=>{y(i,t)})),t.elements.container.addEventListener("touchstart",(i=>{y(i,t)})),document.body.addEventListener("keydown",(i=>{!function(t,i){i.elements.container.matches(":hover")&&("Add"===t.key||"+"===t.key?i.scale.step(1):"Subtract"!==t.key&&"-"!==t.key||i.scale.step(-1))}(i,t)})),t.elements.Ft.addEventListener("click",(()=>{t.scale.kt(1)})),t.elements.Zt.addEventListener("click",(()=>{t.scale.kt(-1)})),t.elements.container.ondragstart=()=>!1}class T{get _(){return d._(this.V)}constructor(t){this.Xt=!1,this.V=t}bt(){this.Xt||(this.Xt=!0,this.step())}step(){requestAnimationFrame((t=>{let i=this.jt(t),s=this.Bt(t),e=this.Wt(t);this._.Ht(),this.Xt=i||s||e,this.Xt&&this.step()}))}jt(t){if(!this._.Nt.It(n.ot))return!1;let i=this._.Nt.dt.step(t);return i||this._.Nt.destroy(n.ot),i}Bt(t){if(!this._.Nt.It(n.ut))return!1;let i=this._.Nt.gt.step(t);return i||this._.Nt.destroy(n.ut),i}Wt(t){if(!this._.Nt.It(n.lt))return!1;let i=this._.Nt.Et.step(t);return i||this._.Nt.destroy(n.lt),i}}function M(t){let i=(i,s)=>`@property --tilted-${t.id}-${i}{syntax:"<length>";inherits:true;initial-value:${s}px;}`;return i("container-width",t.Yt)+i("container-height",t.Ct)+i("surface-width",t.qt)+i("surface-height",t.Jt)}class w{get _(){return d._(this.V)}set value(t){this.Kt=t}get value(){return this.Kt}constructor(t){this.Qt=[],this.ti=[],this.V=t,this.Qt=function(t,i,e,h){let r=[i],n=t/i,o=e-1,u=Math.pow(n,1/o);for(let t=1;t<e-1;t++)r.push(r[r.length-1]*u);r.push(t);for(let t=0;t<e;t++)r[t]=s(r[t],h);return r.reverse()}(this._.j.ii.Z,this._.j.si.Z,this._.j.ei.Z,this._.j.H.Z),this.ti=function(t,i){let e=[];for(let h=0;h<t.length;h++)e.push({hi:h===t.length-1?0:s(t[h+1]-t[h],i),ri:0===h?0:s(t[h]-t[h-1],i)});return e}(this.Qt,this._.j.H.Z),this.value=this.Qt[this._.j.ni.Z-1],this._.oi(this.value),this.ui(!0)}get ai(){return this._.Nt.It(n.ut)?this._.Nt.gt.R:0}get li(){return u(s(this._.scale.value+this.ai,this._.j.H.Z),this._.j.ii.Z,this._.j.si.Z)}ci(t){return this.Qt.indexOf(c(this.Qt,null!=t?t:this.value))}di(t,i){return void 0===i&&(i=this.li),t?this.ti[this.ci(i)].hi:this.ti[this.ci(i)].ri}fi(t){return c(this.Qt,u(this._.scale.value+this.ai+t,this._.j.ii.Z,this._.j.si.Z))-this._.scale.value-this.ai}ui(t=!1){this._.ui([{name:"scale",value:this.value.toString()},{name:"rotateX",value:this._.rotate.x+"deg"}],t)}q(t,i=this._.j.H.Z){if(0===t)return!1;if(i>=0&&(t=s(t,i)),0===t)return!1;let e;return e=i>=0?s(this.value+t,i):this.value+t,e=u(e,this._.j.ii.Z,this._.j.si.Z),e!==this.value&&(this.value=e,this._.oi(),this.ui(),!0)}W(t,i=this._.j.H.Z){return i>=0&&(t=s(t,i)),this.value!==t&&this.q(t-this.value,i)}zoom(t,i=this._.j.mi.Z,e=h.h,r=this._.j.H.Z){let o=t;if(0===t)return!1;if(0===(t=this.fi(t)))return!1;if(r>=0&&(t=s(t,r)),0===t)return!1;let u=t;return t+=this.ai,i*=a(Math.abs(t/o)),this._.Nt.create(n.ut,[t,i,e]),{gi:u,pi:t,time:i}}xi(t,i=this._.j.mi.Z,s=h.h){return this.value!==t&&!1!==this.zoom(t-this.value,i,s,-1)}step(t){let i=t>0;return!1!==this._.scale.zoom(t*this._.scale.di(i))}kt(t,i=null){let s=t>0;if(s&&this.li===this._.j.si.Z||!s&&this.li===this._.j.ii.Z)return;let e=this.di(s),h=this.li,r=t*e,o=this.zoom(r,this._.j.mi.Z);if(!1!==o&&null!==i&&!this._.Nt.It(n.lt)){let t=this.Ei(i,h,o.gi),s=Math.abs(o.gi/r);t.x*=s,t.y*=s,this._.position.ht(t,o.time),this._.Nt.It(n.ut)&&this._.Nt.It(n.ot)&&this._.Nt.dt.k(this._.Nt.gt)}}$i(t,i){return t||(t=this._.scale.value),i||(i=this._.position.coords),{top:{left:{x:i.x-this._.Yt/2/t,y:i.y+this._.Ct/2/t},right:{x:i.x+this._.Yt/2/t,y:i.y+this._.Ct/2/t}},bottom:{left:{x:i.x-this._.Yt/2/t,y:i.y-this._.Ct/2/t},right:{x:i.x+this._.Yt/2/t,y:i.y-this._.Ct/2/t}}}}Ei(t,i,s){let e=this.$i(i),h=e.top.left.x+t.x/i,r=e.top.left.y-t.y/i,n=i+s,o=this.$i(n);return{x:h-(o.top.left.x+t.x/n),y:o.top.left.y-t.y/n-r}}}class A{get _(){return d._(this.V)}set coords(t){this.yi=t}get coords(){return this.yi}constructor(t){this.yi={x:0,y:0},this.V=t}get Ti(){return{x:Math.round(this._.qt/2-.25*this._.Yt),y:Math.round(this._.Jt/2-.25*this._.Ct)}}get min(){return{x:-1*this.Ti.x,y:-1*this.Ti.y}}get max(){return{x:this.Ti.x,y:this.Ti.y}}get ai(){return this._.Nt.It(n.ot)?this._.Nt.dt.R:{x:0,y:0}}move(t,i=this._.j.X.Z,e=this._.j.Mi.Z){if(0===t.x&&0===t.y)return!1;if(i>=0&&(t.x=s(t.x,i),t.y=s(t.y,i)),0===t.x&&0===t.y)return!1;let h;return h=e>=0?{x:s(this.coords.x+t.x,e),y:s(this.coords.y+t.y,e)}:{x:this.coords.x+t.x,y:this.coords.y+t.y},h={x:u(h.x,this.min.x,this.max.x),y:u(h.y,this.min.y,this.max.y)},(h.x!==this.coords.x||h.y!==this.coords.y)&&(this.coords=h,this._.ui([{name:"translate3d",value:-1*this.coords.x+"px, "+-1*this.coords.y+"px, 0"}]),!0)}moveTo(t,i=this._.j.Mi.Z){return i>=0&&(t={x:s(t.x,i),y:s(t.y,i)}),(this.coords.x!==t.x||this.coords.y!==t.y)&&this.move({x:t.x-this.coords.x,y:t.y-this.coords.y},-1,i)}ht(t,i=this._.j.wi.Z,e=h.h,r=this._.j.X.Z,o=this._.j.Mi.Z){if(0===t.x&&0===t.y)return!1;if(r>=0&&(t={x:s(t.x,r),y:s(t.y,r)}),0===t.x&&0===t.y)return!1;let a;return a=o>=0?{x:s(this.coords.x+t.x,o),y:s(this.coords.y+t.y,o)}:{x:this.coords.x+t.x,y:this.coords.y+t.y},!(0===(t={x:u(a.x,this.min.x,this.max.x)-this.coords.x,y:u(a.y,this.min.y,this.max.y)-this.coords.y}).x&&0===t.y||(r>=0&&(t={x:s(t.x,r),y:s(t.y,r)}),0===t.x&&0===t.y||(t={x:s(t.x+this.ai.x,r),y:s(t.y+this.ai.y,r)},this._.Nt.create(n.ot,[{x:t.x,y:t.y},i,e]),0)))}Ai(t,i=this._.j.wi.Z,e=h.h,r=this._.j.Mi.Z){return r>=0&&(t={x:s(t.x,r),y:s(t.y,r)}),(this.coords.x!==t.x||this.coords.y!==t.y)&&this.ht({x:t.x-this.coords.x,y:t.y-this.coords.y},i,e,-1,r)}bi(){this.moveTo({x:u(this.coords.x,this.min.x,this.max.x),y:u(this.coords.y,this.min.y,this.max.y)})}}!function(t){t.Si="scene",t.Li="figure"}(o||(o={}));class b{get _(){return d._(this.V)}constructor(t,i){if(this.id=d.id(),this.V=t,this.type=i.type,this._i=i._i||1,this.element=i.element,!this._.elements.transform.contains(this.element))throw new Error(`Tilted id ${this._.id} transform element doesn't contain entity id ${this.id} element`);let s;for(this.type===o.Si?(this.element.classList.add(`tilted-${this.V}-scene`),this.element.classList.add(`tilted-${this.V}-scene-${this.id}`)):this.type===o.Li&&(this.element.classList.add(`tilted-${this.V}-figure`),this.element.classList.add(`tilted-${this.V}-figure-${this.id}`)),this.type===o.Si?s=this.element:this.type===o.Li&&(s=this.element.parentElement);s!==this._.elements.transform;){if(!s)throw new Error(`Couldn't reach Tilted id ${this._.id} transform element from entity id ${this.id}`);s.classList.add(`tilted-${this.V}-preserve-3d`),s=s.parentElement}}Vi(){this.style||(this.style=document.createElement("style"),this.style.classList.add(`tilted-${this._.id}-css-${this.type}-${this.id}`),document.head.appendChild(this.style))}Ht(t){let i=`rotateX(-${1===this._i?t:(e=t,h=this._i,r=this._.j.Pi.Z,s(parseFloat(e.replace("deg",""))*h,r)+"deg")})`;var e,h,r;if(this.type===o.Si){this.Vi();let t=`.tilted-${this.V}-scene-${this.id}>*:not(.tilted-${this.V}-figure){transform:${i}}`;this.style.innerHTML!==t&&(this.style.innerHTML=t)}else this.type===o.Li&&(this.element.style.transform=i)}}class S{set id(t){this.S=t}get id(){return this.S}set elements(t){this.Ii=t}get elements(){return this.Ii}set position(t){this.Oi=t}get position(){return this.Oi}set scale(t){this.Ui=t}get scale(){return this.Ui}set St(t){this.Di=t}get St(){return this.Di}set Nt(t){this.zi=t}get Nt(){return this.zi}set rotate(t){this.Ni=t}get rotate(){return this.Ni}constructor(t,i,s,e){this.viewport={x:0,y:0},this.Ni={x:0,y:0},this.id=d.id(),d.add(this),this.j=function(t){let i={$scaleMin:.25,$scaleMax:1,$scaleNumSteps:15,$scaleDefaultStep:8,$scaleRounding:3,$scaleGlideFactor:1,$perspectiveValue:750,$perspectiveFactor:1,$tiltMin:0,$tiltMax:35,$tiltRounding:2,$edgeMoveEnabled:0,$edgeMoveArea:20,$edgeMoveSpeed:10,$animationScaleTime:400,$animationGlideTime:400,$durationForToss:150,$tossGlideFactor:1,$animationTossTime:1e3,$coordRoundingInterim:1,$coordRoundingFinal:0};for(const s in t)if(i.hasOwnProperty("$"+s)){let e=t[s];!0===e?e=1:!1===e&&(e=0),i["$"+s]=e}return{ii:{Z:i.$scaleMin,Ri:r.Number},si:{Z:i.$scaleMax,Ri:r.Number},ei:{Z:i.$scaleNumSteps,Ri:r.Number},ni:{Z:i.$scaleDefaultStep,Ri:r.Number},H:{Z:i.$scaleRounding,Ri:r.Number},Gi:{Z:i.$scaleGlideFactor,Ri:r.Number},Yi:{Z:i.$perspectiveValue,Ri:r.T},Ci:{Z:Math.round(i.$perspectiveFactor),Ri:r.M},ki:{Z:Math.round(i.$tiltMin),Ri:r.$},Fi:{Z:Math.round(i.$tiltMax),Ri:r.$},Pi:{Z:i.$tiltRounding,Ri:r.T},Rt:{Z:i.$edgeMoveEnabled,Ri:r.T},Gt:{Z:Math.round(i.$edgeMoveArea),Ri:r.M},J:{Z:Math.round(i.$edgeMoveSpeed),Ri:r.M},mi:{Z:Math.round(i.$animationScaleTime),Ri:r.A},wi:{Z:Math.round(i.$animationGlideTime),Ri:r.A},st:{Z:Math.round(i.$durationForToss),Ri:r.A},rt:{Z:i.$tossGlideFactor,Ri:r.Number},nt:{Z:Math.round(i.$animationTossTime),Ri:r.A},X:{Z:i.$coordRoundingInterim,Ri:r.T},Mi:{Z:i.$coordRoundingFinal,Ri:r.T}}}(s),this.elements=this.Zi(t,i),this.Xi=this.ji(),this.transform={changed:!1,properties:[{name:"scale",value:""},{name:"perspective",value:""},{name:"rotateX",value:""},{name:"translate3d",value:"0, 0, 0"}]},this.Nt=new E(this.id),this.St=new T(this.id),v(this),this.Bi(),new ResizeObserver((()=>{this.Wi(),this.Bi(),this.position.bi()})).observe(this.elements.container),new ResizeObserver((()=>{this.Wi(),this.position.bi()})).observe(this.elements._),this.entities=[];for(let t of e)this.entities.push(new b(this.id,t));this.position=new A(this.id),this.Hi(),this.scale=new w(this.id)}Zi(t,i){t.classList.add(`tilted-${this.id}-container`);let s=document.createElement("div");s.classList.add(`tilted-${this.id}-viewport`);let e=document.createElement("div");e.classList.add(`tilted-${this.id}-transform`),e.classList.add(`tilted-${this.id}-preserve-3d`),i.classList.add(`tilted-${this.id}-surface`);let h=document.createElement("div");h.classList.add(`tilted-${this.id}-controls`);let r=document.createElement("div");r.classList.add(`tilted-${this.id}-controls-zoom-in`);let n=document.createElement("div");n.classList.add(`tilted-${this.id}-controls-zoom-out`),h.appendChild(r),h.appendChild(n);let o=new Array;for(let i of t.children)o.push(i);for(let t of o)e.appendChild(t);return i.parentElement!==e&&e.appendChild(i),s.appendChild(e),t.appendChild(s),t.appendChild(h),{container:t,controls:h,Ft:r,Zt:n,viewport:s,transform:e,_:i}}ji(){let t=document.createElement("style");t.classList.add(`tilted-${this.id}-css-static`),t.innerHTML=function(t){let i="";for(const s in t.j){let e="";"length"===t.j[s].Ri?e="px":"angle"===t.j[s].Ri?e="deg":"time"===t.j[s].Ri&&(e="ms"),i+=`@property --${s} { `,i+=`syntax:"<${t.j[s].Ri}>"; `,i+="inherits:true; ",i+=`initial-value:${t.j[s].Z}${e}; } `}return i+=`.tilted-${t.id}-container{position:relative !important;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tilted-${t.id}-container:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing;}.tilted-${t.id}-controls{position:absolute;top:100px;right:30px;width:30px;border-radius:8px;box-shadow:rgba(0, 0, 0, 0.16) 0px 1px 4px;box-sizing:content-box;overflow:hidden;}.tilted-${t.id}-controls-zoom-in,.tilted-${t.id}-controls-zoom-out{position:relative;width:30px;height:30px;background:#ffffffcc;cursor:pointer;box-sizing:content-box;}.tilted-${t.id}-controls-zoom-in{border-bottom:1px solid #444444;}.tilted-${t.id}-controls-zoom-in:active,.tilted-${t.id}-controls-zoom-out:active{background:#ffffff;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-in:after,.tilted-${t.id}-controls-zoom-out:before{content:"";display:block;position:absolute;background:#444444;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-out:before{height:2px;width:18px;top:14px;left:6px;}.tilted-${t.id}-controls-zoom-in:after{height:18px;width:2px;top:6px;left:14px;}.tilted-${t.id}-viewport{width:var(--tilted-`+t.id+"-surface-width) !important;height:var(--tilted-"+t.id+"-surface-height) !important;position:relative !important;will-change:top,left;}"+`.tilted-${t.id}-transform{width:var(--tilted-`+t.id+"-surface-width) !important;height:var(--tilted-"+t.id+"-surface-height) !important;will-change:transform;}"+`.tilted-${t.id}-surface{position:relative !important;overflow:visible !important;z-index:100 !important;}`+`.tilted-${t.id}-scene>*:not(.tilted-${t.id}-figure),`+`.tilted-${t.id}-figure{transform-origin:bottom;}`+`.tilted-${t.id}-preserve-3d{transform-style:preserve-3d;}`,i}(this),document.head.appendChild(t);let i=document.createElement("style");return i.classList.add(`tilted-${this.id}-css-dynamic`),i.innerHTML=M(this),document.head.appendChild(i),{qi:t,Ji:i}}Wi(){this.Xi.Ji.innerHTML=M(this)}get Yt(){return this.elements.container.offsetWidth}get Ct(){return this.elements.container.offsetHeight}get qt(){return this.elements._.offsetWidth}get Jt(){return this.elements._.offsetHeight}ui(t,i=!1){for(let i of t)for(let t of this.transform.properties)t.name===i.name&&(t.value=i.value);i?this.Ht(!0):(this.transform.changed=!0,this.St.bt())}Ht(t=!1){if(!this.transform.changed&&!t)return;this.transform.changed=!1;let i="";for(let t of this.transform.properties)if(i+=`${t.name}(${t.value}) `,"rotateX"===t.name)for(let i of this.entities)i.Ht(t.value);this.elements.transform.style.transform=i}Bi(){this.viewport={x:0-this.qt/2+this.Yt/2,y:0-this.Jt/2+this.Ct/2},this.elements.viewport.style.top=this.viewport.y+"px",this.elements.viewport.style.left=this.viewport.x+"px"}Hi(){this.ui([{name:"perspective",value:Math.round(this.j.Yi.Z*this.j.Ci.Z).toString()+"px"}])}oi(t=null){null===t&&(t=this.scale.value);let i=(t-this.j.ii.Z)/(this.j.si.Z-this.j.ii.Z);this.rotate={x:s(this.j.ki.Z+i*(this.j.Fi.Z-this.j.ki.Z),this.j.Pi.Z),y:0}}log(t=!1){let i="";if(t)for(let s of t)i+=s.Ki+(void 0!==s.from?" from "+s.from:"")+(void 0!==s.to?" to "+s.to:"")+"\n";console.log(i+`x: ${this.position.coords.x}\n`+`y: ${this.position.coords.y}\n`+`limit.x: ${this.position.Ti.x}\n`+`limit.y: ${this.position.Ti.y}\n`+`scale: ${this.scale.value}`)}it(){this.Nt.destroy(n.ot)}}class L{constructor(t,i,s={},e=[]){this._=new S(t,i,s,e),this._}}})(),Tilted=i.default})();