var Tilted;(()=>{"use strict";var t,i,s,e,h,r={d:(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},n={};function o(t,i){return parseFloat(t.toFixed(i))}function u(t,i,s){return Math.min(s,Math.max(i,t))}function a(t){return u(t,0,1)}function l(t,s=i.t){switch(s){case i.t:return t;case i.i:return Math.sqrt(1-Math.pow(t-1,2))}}function c(t,i,s,e){let h=[i],r=t/i,n=s-1,u=Math.pow(r,1/n);for(let t=1;t<s-1;t++)h.push(h[h.length-1]*u);h.push(t);for(let t=0;t<s;t++)h[t]=o(h[t],e);return h.reverse()}function d(t,i){return t.reduce((function(t,s){return Math.abs(s-i)<Math.abs(t-i)?s:t}))}r.d(n,{default:()=>S}),function(t){t.h="top",t.u="bottom",t.l="left",t.m="right",t.p="none"}(t||(t={})),function(t){t.t="linear",t.i="easeOutCirc"}(i||(i={})),function(t){t._="angle",t.v="color",t.T="integer",t.Number="number",t.$="length",t.M="time"}(s||(s={}));class f{static id(){return f.A++}static add(t){f.S.set(t.id,t)}static surface(t){return f.S.get(t)}}f.A=0,f.S=new Map;class g{get L(){return f.surface(this.V)}constructor(t){this.P=0,this.U=0,this.destroyed=!1,this.V=t,this.P=this.U=performance.now()}destroy(){this.destroyed=!0}}class m extends g{get O(){return{x:this.I.x+this.D.x.value*this.D.x.sign,y:this.I.y+this.D.y.value*this.D.y.sign}}get remaining(){return{x:(this.D.x.value-this.G.x)*this.D.x.sign,y:(this.D.y.value-this.G.y)*this.D.y.sign}}constructor(t,i,s,e){super(t),this.G={x:0,y:0},this.I={x:this.L.position.coords.x,y:this.L.position.coords.y},this.D={x:{value:Math.abs(i.x),sign:i.x>0?1:-1},y:{value:Math.abs(i.y),sign:i.y>0?1:-1}},this.N=s,this.R=e,this.L.k.C.Y&&console.log("Glide created: x "+this.D.x.value*this.D.x.sign+", y "+this.D.y.value*this.D.y.sign+", initial.x "+this.I.x+", initial.y "+this.I.y+", target.x "+this.O.x+", target.y "+this.O.y)}tieWithZoomAnimation(t){this.F=t}adjustMoveByZoom(t){if(!this.F)return t;if(this.F.initial===this.F.target)return t;const i=this.F.initial/this.F.target;return t/(i+t*(1-i))}step(t){if(this.destroyed)return!1;let i=a((t-this.P)/this.N),s=a(this.adjustMoveByZoom(l(i,this.R)));if(s>=1)return this.L.k.C.Y&&console.log("Glide finished: "+(t-this.P)+"ms, surface.coords.x "+this.L.position.coords.x+", surface.coords.y "+this.L.position.coords.y+", target.x "+this.O.x+", target.y "+this.O.y),this.L.position.moveTo({x:this.O.x,y:this.O.y}),!1;{let i={x:0,y:0};return this.D.x.value>0&&this.D.x.value>this.G.x&&(i.x=o(Math.max(0,this.D.x.value*s-this.G.x),this.L.k.Z.Y)),this.D.y.value>0&&this.D.y.value>this.G.y&&(i.y=o(Math.max(0,this.D.y.value*s-this.G.y),this.L.k.Z.Y)),(i.x>0||i.y>0)&&(this.L.position.move({x:i.x*this.D.x.sign,y:i.y*this.D.y.sign},this.L.k.Z.Y,this.L.k.Z.Y),this.G.x=o(this.G.x+i.x,this.L.k.Z.Y),this.G.y=o(this.G.y+i.y,this.L.k.Z.Y),this.U=t),!0}}}class p extends g{get O(){return this.I+this.X.value*this.X.sign}get initial(){return this.I}get target(){return this.O}get remaining(){return(this.X.value-this.G)*this.X.sign}constructor(t,i,s,e){super(t),this.G=0,this.I=this.L.scale.value,this.X={value:Math.abs(i),sign:i>0?1:-1},this.N=s,this.R=e,this.L.k.C.Y&&console.log("Zoom created: shift "+this.X.value+", initial "+this.I+", target "+this.O)}step(t){if(this.destroyed)return!1;let i=a((t-this.P)/this.N),s=a(l(i,this.R));if(s>=1)return this.L.k.C.Y&&console.log("Zoom finished: "+(t-this.P)+"ms, surface.scale.value "+this.L.scale.value+", target "+this.O),this.L.scale.changeTo(this.O),!1;{let i=0;return this.X.value>0&&this.X.value>this.G&&(i=o(Math.max(0,this.X.value*s-this.G),this.L.k.j.Y)),i>0&&(this.L.scale.change(i*this.X.sign),this.G=o(this.G+i,this.L.k.j.Y),this.U=t),!0}}}class x extends g{constructor(t,i){super(t),this.D=i}update(t){this.D.x!==t.x&&(this.D.x=t.x),this.D.y!==t.y&&(this.D.y=t.y)}step(t){if(this.destroyed)return!1;let i=Math.max(1,t-this.U)/10,s=this.L.k.B.Y*this.D.x/this.L.scale.value*i,e=this.L.k.B.Y*this.D.y/this.L.scale.value*i;return this.U=t,this.L.position.move({x:s,y:e})}}class y extends g{constructor(t,i){super(t),this.id=f.id(),this.W={x:0,y:0},this.H={x:0,y:0},this.L.cancelOngoingMoves(),this.W={x:i.x,y:i.y}}step(t){let i=this.L.position.move({x:(this.W.x-t.x)/this.L.scale.value,y:(this.W.y-t.y)/this.L.scale.value});return this.H={x:this.H.x+this.W.x-t.x,y:this.H.y+this.W.y-t.y},this.W={x:t.x,y:t.y},i}destroy(){performance.now()-this.P<this.L.k.q.Y&&this.J(),this.destroyed=!0}J(){this.L.position.glide({x:this.H.x*this.L.k.K.Y/this.L.scale.value,y:this.H.y*this.L.k.K.Y/this.L.scale.value},this.L.k.tt.Y,i.i)}}!function(t){t.it="surfaceGlide",t.st="surfaceZoom",t.et="surfaceEdge",t.ht="surfaceDrag"}(e||(e={}));class E{get L(){return f.surface(this.V)}get surfaceGlide(){return this.rt}get surfaceZoom(){return this.nt}get surfaceEdge(){return this.ot}get surfaceDrag(){return this.ut}constructor(t){this.rt=null,this.nt=null,this.ot=null,this.ut=null,this.V=t}create(t,i){switch(t){case e.it:this.lt(...i);break;case e.st:this.ct(...i);break;case e.et:this.dt(...i);break;case e.ht:this.ft(...i)}this.L.animationExecutor.initiate()}destroy(t){switch(t){case e.it:return this.gt();case e.st:return this.xt();case e.et:return this.yt();case e.ht:return this.Et()}}exists(t){switch(t){case e.it:return this._t();case e.st:return this.vt();case e.et:return this.Tt();case e.ht:return this.$t()}}lt(t,i,s){this.gt(),this.rt=new m(this.L.id,t,i,s)}gt(){this._t()&&(this.rt.destroy(),this.rt=null)}_t(){return null!==this.rt}ct(t,i,s){this.xt(),this.nt=new p(this.L.id,t,i,s)}xt(){this.vt()&&(this.nt.destroy(),this.nt=null)}vt(){return null!==this.nt}dt(t){this.gt(),this.yt(),this.ot=new x(this.L.id,t)}yt(){this.Tt()&&(this.ot.destroy(),this.ot=null)}Tt(){return null!==this.ot}ft(t){this.Et(),this.ut=new y(this.L.id,t)}Et(){this.$t()&&(this.ut.destroy(),this.ut=null)}$t(){return null!==this.ut}}function _(t,i){let s=i.elements.container.getBoundingClientRect(),e=window.TouchEvent&&t instanceof TouchEvent;return{button:e?0:t.button,x:e?t.touches[0].clientX-s.left:t.clientX-s.left,y:e?t.touches[0].clientY-s.top:t.clientY-s.top}}function v(t,i){let s=_(t,i);0===s.button&&i.animationStorage.create(e.ht,[s])}function T(i){i.elements.container.addEventListener("mousemove",(s=>{!function(i,s){1===s.k.Mt.Y&&function(i,s){if(i.animationStorage.exists(e.ht))return!1;let h={x:t.p,y:t.p};s.y<=i.k.At.Y?s.x<=i.k.At.Y?(h.x=t.l,h.y=t.h):s.x>=i.containerWidth-i.k.At.Y?(h.x=t.m,h.y=t.h):h.y=t.h:s.y>=i.containerHeight-i.k.At.Y?s.x<=i.k.At.Y?(h.x=t.l,h.y=t.u):s.x>=i.containerWidth-i.k.At.Y?(h.x=t.m,h.y=t.u):h.y=t.u:s.x<=i.k.At.Y?h.x=t.l:s.x>=i.containerWidth-i.k.At.Y&&(h.x=t.m);let r=0,n=0;h.y===t.p&&h.x===t.p||(h.y===t.h?n=(i.k.At.Y+1-s.y)/(i.k.At.Y+1)*-1:h.y===t.u&&(n=(i.k.At.Y+1-(i.containerHeight-s.y))/(i.k.At.Y+1)),h.x===t.l?r=(i.k.At.Y+1-s.x)/(i.k.At.Y+1)*-1:h.x===t.m&&(r=(i.k.At.Y+1-(i.containerWidth-s.x))/(i.k.At.Y+1)));let o=!1;(0===r||r>0&&i.position.coords.x>=i.position.max.x||r<0&&i.position.coords.x<=i.position.min.x)&&(o=!0);let u=!1;(0===n||n>0&&i.position.coords.y>=i.position.max.y||n<0&&i.position.coords.y<=i.position.min.y)&&(u=!0),o&&u?i.animationStorage.exists(e.et)&&i.animationStorage.destroy(e.et):i.animationStorage.exists(e.et)?i.animationStorage.surfaceEdge.update({x:r,y:n}):i.animationStorage.create(e.et,[{x:r,y:n}])}(s,_(i,s))}(s,i)})),i.elements.container.addEventListener("wheel",(t=>{!function(t,i){t.preventDefault(),i.scale.stepAndGlide(function(t){return{x:t.deltaX,y:t.deltaY}}(t).y<0?1:-1,_(t,i))}(t,i)})),function(t){function i(i){t.animationStorage.exists(e.ht)&&t.animationStorage.surfaceDrag.step(_(i,t))}function s(){t.animationStorage.destroy(e.ht)}t.elements.container.addEventListener("mousemove",i),t.elements.container.addEventListener("touchmove",i),document.body.addEventListener("mouseup",s),document.body.addEventListener("touchend",s)}(i),i.elements.container.addEventListener("mousedown",(t=>{v(t,i)})),i.elements.container.addEventListener("touchstart",(t=>{v(t,i)})),document.body.addEventListener("keydown",(t=>{!function(t,i){i.elements.container.matches(":hover")&&("Add"===t.key||"+"===t.key?i.scale.step(1):"Subtract"!==t.key&&"-"!==t.key||i.scale.step(-1))}(t,i)})),i.elements.controlsZoomIn.addEventListener("click",(()=>{i.scale.stepAndGlide(1)})),i.elements.controlsZoomOut.addEventListener("click",(()=>{i.scale.stepAndGlide(-1)})),i.elements.container.ondragstart=()=>!1}class ${get L(){return f.surface(this.V)}constructor(t){this.wt=!1,this.V=t}initiate(){this.wt||(this.wt=!0,this.bt())}bt(){let t=performance.now();requestAnimationFrame((()=>{let i=this.St(t),s=this.Lt(t),e=this.Vt(t);this.L.applyTransformProperty(),this.wt=i||s||e,this.wt&&this.bt()}))}St(t){if(!this.L.animationStorage.exists(e.it))return!1;let i=this.L.animationStorage.surfaceGlide.step(t);return i||this.L.animationStorage.destroy(e.it),i}Lt(t){if(!this.L.animationStorage.exists(e.st))return!1;let i=this.L.animationStorage.surfaceZoom.step(t);return i||this.L.animationStorage.destroy(e.st),i}Vt(t){if(!this.L.animationStorage.exists(e.et))return!1;let i=this.L.animationStorage.surfaceEdge.step(t);return i||this.L.animationStorage.destroy(e.et),i}}function M(t){return"@property --tilted-container-width-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.containerWidth+"px;}@property --tilted-container-height-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.containerHeight+"px;}@property --tilted-surface-width-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.surfaceWidth+"px;}@property --tilted-surface-height-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.surfaceHeight+"px;}"}class A{get L(){return f.surface(this.V)}constructor(t){this.Pt=[],this.Ut=[],this.V=t,this.Pt=c(this.L.k.Ot.Y,this.L.k.It.Y,this.L.k.Dt.Y,this.L.k.j.Y),this.Ut=function(t,i){let s=[];for(let e=0;e<t.length;e++)s.push({up:e===t.length-1?0:o(t[e+1]-t[e],i),down:0===e?0:o(t[e]-t[e-1],i)});return s}(this.Pt,this.L.k.j.Y),this.zt=this.Pt[this.L.k.Gt.Y-1],this.L.updateRotate(this.zt),this.Nt(!0)}get value(){return this.zt}get Rt(){return this.L.animationStorage.exists(e.st)?this.L.animationStorage.surfaceZoom.remaining:0}get Yt(){return u(o(this.L.scale.value+this.Rt,this.L.k.j.Y),this.L.k.Ot.Y,this.L.k.It.Y)}Ct(t){return this.Pt.indexOf(d(this.Pt,null!=t?t:this.zt))}kt(t,i){return void 0===i&&(i=this.Yt),t?this.Ut[this.Ct(i)].up:this.Ut[this.Ct(i)].down}Ft(t){return d(this.Pt,u(this.L.scale.value+this.Rt+t,this.L.k.Ot.Y,this.L.k.It.Y))-this.L.scale.value-this.Rt}Nt(t=!1){this.L.setTransformValues([{name:"scale",value:this.zt.toString()},{name:"rotateX",value:this.L.rotate.x+"deg"}],t)}change(t,i=this.L.k.j.Y){if(0===t)return!1;if(i>=0&&(t=o(t,i)),0===t)return!1;let s;return s=i>=0?o(this.zt+t,i):this.zt+t,s=u(s,this.L.k.Ot.Y,this.L.k.It.Y),s!==this.zt&&(this.zt=s,this.L.updateRotate(),this.Nt(),!0)}changeTo(t,i=this.L.k.j.Y){return i>=0&&(t=o(t,i)),this.zt!==t&&this.change(t-this.zt,i)}zoom(t,s=this.L.k.Zt.Y,h=i.i,r=this.L.k.j.Y){let n=t;if(0===t)return!1;if(0===(t=this.Ft(t)))return!1;if(r>=0&&(t=o(t,r)),0===t)return!1;let u=t;return t+=this.Rt,s*=a(Math.abs(t/n)),this.L.animationStorage.create(e.st,[t,s,h]),{new:u,combined:t,time:s}}zoomTo(t,s=this.L.k.Zt.Y,e=i.i){return this.zt!==t&&!1!==this.zoom(t-this.zt,s,e,-1)}step(t){let i=t>0;return!1!==this.L.scale.zoom(t*this.L.scale.kt(i))}stepAndGlide(t,i=null){let s=t>0;if(s&&this.Yt===this.L.k.It.Y||!s&&this.Yt===this.L.k.Ot.Y)return;let h=this.kt(s),r=this.Yt,n=t*h,o=this.zoom(n,this.L.k.Zt.Y);if(!1!==o&&null!==i&&!this.L.animationStorage.exists(e.et)){let t=this.glideToMouse(i,r,o.new),s=Math.abs(o.new/n);t.x*=s,t.y*=s,this.L.position.glide(t,o.time),this.L.animationStorage.exists(e.st)&&this.L.animationStorage.exists(e.it)&&this.L.animationStorage.surfaceGlide.tieWithZoomAnimation(this.L.animationStorage.surfaceZoom)}}getDisplayedSurface(t,i){return t||(t=this.L.scale.value),i||(i=this.L.position.coords),{top:{left:{x:i.x-this.L.containerWidth/2/t,y:i.y+this.L.containerHeight/2/t},right:{x:i.x+this.L.containerWidth/2/t,y:i.y+this.L.containerHeight/2/t}},bottom:{left:{x:i.x-this.L.containerWidth/2/t,y:i.y-this.L.containerHeight/2/t},right:{x:i.x+this.L.containerWidth/2/t,y:i.y-this.L.containerHeight/2/t}}}}glideToMouse(t,i,s){let e=this.getDisplayedSurface(i),h=e.top.left.x+t.x/i,r=e.top.left.y-t.y/i,n=i+s,o=this.getDisplayedSurface(n);return{x:h-(o.top.left.x+t.x/n),y:o.top.left.y-t.y/n-r}}}class w{get L(){return f.surface(this.V)}get coords(){return{x:this.Xt.x,y:this.Xt.y}}constructor(t){this.Xt={x:0,y:0},this.V=t}get jt(){return{x:Math.round(this.L.surfaceWidth/2-.25*this.L.containerWidth),y:Math.round(this.L.surfaceHeight/2-.25*this.L.containerHeight)}}get limit(){return this.jt}get min(){return{x:-1*this.jt.x,y:-1*this.jt.y}}get max(){return{x:this.jt.x,y:this.jt.y}}get Rt(){return this.L.animationStorage.exists(e.it)?this.L.animationStorage.surfaceGlide.remaining:{x:0,y:0}}move(t,i=this.L.k.Z.Y,s=this.L.k.Bt.Y){if(0===t.x&&0===t.y)return!1;if(i>=0&&(t.x=o(t.x,i),t.y=o(t.y,i)),0===t.x&&0===t.y)return!1;let e;return e=s>=0?{x:o(this.Xt.x+t.x,s),y:o(this.Xt.y+t.y,s)}:{x:this.Xt.x+t.x,y:this.Xt.y+t.y},e={x:u(e.x,this.min.x,this.max.x),y:u(e.y,this.min.y,this.max.y)},(e.x!==this.Xt.x||e.y!==this.Xt.y)&&(this.Xt=e,this.L.setTransformValues([{name:"translate3d",value:-1*this.Xt.x+"px, "+-1*this.Xt.y+"px, 0"}]),!0)}moveTo(t,i=this.L.k.Bt.Y){return i>=0&&(t={x:o(t.x,i),y:o(t.y,i)}),(this.Xt.x!==t.x||this.Xt.y!==t.y)&&this.move({x:t.x-this.Xt.x,y:t.y-this.Xt.y},-1,i)}glide(t,s=this.L.k.Wt.Y,h=i.i,r=this.L.k.Z.Y,n=this.L.k.Bt.Y){if(0===t.x&&0===t.y)return!1;if(r>=0&&(t={x:o(t.x,r),y:o(t.y,r)}),0===t.x&&0===t.y)return!1;let a;return a=n>=0?{x:o(this.Xt.x+t.x,n),y:o(this.Xt.y+t.y,n)}:{x:this.Xt.x+t.x,y:this.Xt.y+t.y},!(0===(t={x:u(a.x,this.min.x,this.max.x)-this.Xt.x,y:u(a.y,this.min.y,this.max.y)-this.Xt.y}).x&&0===t.y||(r>=0&&(t={x:o(t.x,r),y:o(t.y,r)}),0===t.x&&0===t.y||(this.L.k.C.Y&&this.L.log([{desc:"glide coords.x",to:t.x},{desc:"glide coords.y",to:t.y}]),t={x:o(t.x+this.Rt.x,r),y:o(t.y+this.Rt.y,r)},this.L.animationStorage.create(e.it,[{x:t.x,y:t.y},s,h]),0)))}glideTo(t,s=this.L.k.Wt.Y,e=i.i,h=this.L.k.Bt.Y){return h>=0&&(t={x:o(t.x,h),y:o(t.y,h)}),(this.Xt.x!==t.x||this.Xt.y!==t.y)&&this.glide({x:t.x-this.Xt.x,y:t.y-this.Xt.y},s,e,-1,h)}enforceLimits(){this.moveTo({x:u(this.Xt.x,this.min.x,this.max.x),y:u(this.Xt.y,this.min.y,this.max.y)})}}!function(t){t.Ht="scene",t.qt="figure"}(h||(h={}));class b{get L(){return f.surface(this.V)}constructor(t,i){if(this.A=f.id(),this.V=t,this.Jt=i.type,this.Kt=i.factor||1,this.Qt=i.element,!this.L.elements.transform.contains(this.Qt))throw new Error(`Tilted id ${this.L.id} transform element doesn't contain entity id ${this.A} element`);let s;for(this.Jt===h.Ht?(this.Qt.classList.add(`tilted-${this.V}-scene`),this.Qt.classList.add(`tilted-${this.V}-scene-${this.A}`)):this.Jt===h.qt&&(this.Qt.classList.add(`tilted-${this.V}-figure`),this.Qt.classList.add(`tilted-${this.V}-figure-${this.A}`)),this.Jt===h.Ht?s=this.Qt:this.Jt===h.qt&&(s=this.Qt.parentElement);s!==this.L.elements.transform;){if(!s)throw new Error(`Couldn't reach Tilted id ${this.L.id} transform element from entity id ${this.A}`);s.classList.add(`tilted-${this.V}-preserve-3d`),s=s.parentElement}}ti(){this.ii||(this.ii=document.createElement("style"),this.ii.classList.add(`tilted-${this.L.id}-css-${this.Jt}-${this.A}`),document.head.appendChild(this.ii))}applyTransformProperty(t){let i=`rotateX(-${1===this.Kt?t:(s=t,e=this.Kt,r=this.L.k.si.Y,o(parseFloat(s.replace("deg",""))*e,r)+"deg")})`;var s,e,r;if(this.Jt===h.Ht){this.ti();let t=`.tilted-${this.V}-scene-${this.A}>*:not(.tilted-${this.V}-figure){transform:${i}}`;this.ii.innerHTML!==t&&(this.ii.innerHTML=t)}else this.Jt===h.qt&&(this.Qt.style.transform=i)}}const S=class{get id(){return this.A}get elements(){return this.ei}get position(){return this.hi}get scale(){return this.ri}get animationExecutor(){return this.ni}get animationStorage(){return this.oi}get rotate(){return{x:this.ui.x,y:this.ui.y}}constructor(t,i,e={},h=[]){this.ai={x:0,y:0},this.ui={x:0,y:0},this.A=f.id(),f.add(this),this.k=function(t){let i={debugMode:0,scaleMin:.25,scaleMax:1,scaleNumSteps:15,scaleDefaultStep:8,scaleRounding:3,scaleGlideFactor:1,perspectiveValue:750,perspectiveFactor:1,tiltMin:0,tiltMax:35,tiltRounding:2,edgeMoveEnabled:0,edgeMoveArea:20,edgeMoveSpeed:10,animationScaleTime:400,animationGlideTime:400,durationForToss:150,tossGlideFactor:1,animationTossTime:1e3,coordRoundingInterim:1,coordRoundingFinal:0};for(const s in t)if(i.hasOwnProperty(s)){let e=t[s];!0===e?e=1:!1===e&&(e=0),i[s]=e}let e=c(i.scaleMin,i.scaleMax,i.scaleNumSteps,i.scaleRounding);return i.debugMode&&console.log("Scale steps: ",e),{C:{Y:i.debugMode,li:s.T},Ot:{Y:i.scaleMin,li:s.Number},It:{Y:i.scaleMax,li:s.Number},Dt:{Y:i.scaleNumSteps,li:s.Number},Gt:{Y:i.scaleDefaultStep,li:s.Number},j:{Y:i.scaleRounding,li:s.Number},ci:{Y:i.scaleGlideFactor,li:s.Number},di:{Y:i.perspectiveValue,li:s.T},fi:{Y:Math.round(i.perspectiveFactor),li:s.$},gi:{Y:Math.round(i.tiltMin),li:s._},mi:{Y:Math.round(i.tiltMax),li:s._},si:{Y:i.tiltRounding,li:s.T},Mt:{Y:i.edgeMoveEnabled,li:s.T},At:{Y:Math.round(i.edgeMoveArea),li:s.$},B:{Y:Math.round(i.edgeMoveSpeed),li:s.$},Zt:{Y:Math.round(i.animationScaleTime),li:s.M},Wt:{Y:Math.round(i.animationGlideTime),li:s.M},q:{Y:Math.round(i.durationForToss),li:s.M},K:{Y:i.tossGlideFactor,li:s.Number},tt:{Y:Math.round(i.animationTossTime),li:s.M},Z:{Y:i.coordRoundingInterim,li:s.T},Bt:{Y:i.coordRoundingFinal,li:s.T}}}(e),this.ei=this.pi(t,i),this.xi=this.yi(),this.Ei={changed:!1,values:{scale:"",perspective:"",rotateX:"",translate3d:"0, 0, 0"}},this.oi=new E(this.id),this.ni=new $(this.id),T(this),this._i(),new ResizeObserver((()=>{this.Ti(),this._i(),this.hi.enforceLimits()})).observe(this.elements.container),new ResizeObserver((()=>{this.Ti(),this.hi.enforceLimits()})).observe(this.elements.surface),this.$i=[];for(let t of h)this.$i.push(new b(this.id,t));this.hi=new w(this.id),this.Mi(),this.ri=new A(this.id)}pi(t,i){t.classList.add(`tilted-${this.id}-container`);let s=document.createElement("div");s.classList.add(`tilted-${this.id}-viewport`);let e=document.createElement("div");e.classList.add(`tilted-${this.id}-transform`),e.classList.add(`tilted-${this.id}-preserve-3d`),i.classList.add(`tilted-${this.id}-surface`);let h=document.createElement("div");h.classList.add(`tilted-${this.id}-controls`);let r=document.createElement("div");r.classList.add(`tilted-${this.id}-controls-zoom-in`);let n=document.createElement("div");n.classList.add(`tilted-${this.id}-controls-zoom-out`),h.appendChild(r),h.appendChild(n);let o=new Array;for(let i of t.children)o.push(i);for(let t of o)e.appendChild(t);return i.parentElement!==e&&e.appendChild(i),s.appendChild(e),t.appendChild(s),t.appendChild(h),{container:t,controls:h,controlsZoomIn:r,controlsZoomOut:n,viewport:s,transform:e,surface:i}}yi(){let t=document.createElement("style");t.classList.add(`tilted-${this.id}-css-static`),t.innerHTML=function(t){let i="";for(const s in t.k){let e="";"length"===t.k[s].li?e="px":"angle"===t.k[s].li?e="deg":"time"===t.k[s].li&&(e="ms"),i+=`@property --${s} { `,i+=`syntax:"<${t.k[s].li}>"; `,i+="inherits:true; ",i+=`initial-value:${t.k[s].Y}${e}; } `}return i+=`.tilted-${t.id}-container{position:relative !important;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tilted-${t.id}-container:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing;}.tilted-${t.id}-controls{position:absolute;top:100px;right:30px;width:30px;border-radius:8px;box-shadow:rgba(0, 0, 0, 0.16) 0px 1px 4px;box-sizing:content-box;overflow:hidden;}.tilted-${t.id}-controls-zoom-in,.tilted-${t.id}-controls-zoom-out{position:relative;width:30px;height:30px;background:#ffffffcc;cursor:pointer;box-sizing:content-box;}.tilted-${t.id}-controls-zoom-in{border-bottom:1px solid #444444;}.tilted-${t.id}-controls-zoom-in:active,.tilted-${t.id}-controls-zoom-out:active{background:#ffffff;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-in:after,.tilted-${t.id}-controls-zoom-out:before{content:"";display:block;position:absolute;background:#444444;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-out:before{height:2px;width:18px;top:14px;left:6px;}.tilted-${t.id}-controls-zoom-in:after{height:18px;width:2px;top:6px;left:14px;}.tilted-${t.id}-viewport{width:var(--tilted-surface-width-`+t.id+") !important;height:var(--tilted-surface-height-"+t.id+") !important;position:relative !important;will-change:top,left;}"+`.tilted-${t.id}-transform{width:var(--tilted-surface-width-`+t.id+") !important;height:var(--tilted-surface-height-"+t.id+") !important;will-change:transform;}"+`.tilted-${t.id}-surface{position:relative !important;overflow:visible !important;z-index:100 !important;}`+`.tilted-${t.id}-scene>*:not(.tilted-${t.id}-figure),`+`.tilted-${t.id}-figure{transform-origin:bottom;}`+`.tilted-${t.id}-preserve-3d{transform-style:preserve-3d;}`,i}(this),document.head.appendChild(t);let i=document.createElement("style");return i.classList.add(`tilted-${this.id}-css-dynamic`),i.innerHTML=M(this),document.head.appendChild(i),{static:t,dynamic:i}}Ti(){this.xi.dynamic.innerHTML=M(this)}get containerWidth(){return this.elements.container.offsetWidth}get containerHeight(){return this.elements.container.offsetHeight}get surfaceWidth(){return this.elements.surface.offsetWidth}get surfaceHeight(){return this.elements.surface.offsetHeight}setTransformValues(t,i=!1){for(let{name:i,value:s}of t)this.Ei.values.hasOwnProperty(i)&&(this.Ei.values[i]=s);i?this.applyTransformProperty(!0):(this.Ei.changed=!0,this.ni.initiate())}applyTransformProperty(t=!1){if(this.Ei.changed||t){this.Ei.changed=!1,this.ei.transform.style.transform=`scale(${this.Ei.values.scale}) perspective(${this.Ei.values.perspective}) rotateX(${this.Ei.values.rotateX}) translate3d(${this.Ei.values.translate3d})`;for(let t of this.$i)t.applyTransformProperty(this.Ei.values.rotateX)}}_i(){this.ai={x:0-this.surfaceWidth/2+this.containerWidth/2,y:0-this.surfaceHeight/2+this.containerHeight/2},this.elements.viewport.style.top=this.ai.y+"px",this.elements.viewport.style.left=this.ai.x+"px"}Mi(){this.setTransformValues([{name:"perspective",value:Math.round(this.k.di.Y*this.k.fi.Y).toString()+"px"}])}updateRotate(t=null){null===t&&(t=this.scale.value);let i=(t-this.k.Ot.Y)/(this.k.It.Y-this.k.Ot.Y);this.ui={x:o(this.k.gi.Y+i*(this.k.mi.Y-this.k.gi.Y),this.k.si.Y),y:0}}log(t=!1){if(0===this.k.C.Y)return;let i="";if(t)for(let s of t)i+=s.desc+(void 0!==s.from?" from "+s.from:"")+(void 0!==s.to?" to "+s.to:"")+"\n";console.log(i+`x: ${this.hi.coords.x}\n`+`y: ${this.hi.coords.y}\n`+`limit.x: ${this.hi.limit.x}\n`+`limit.y: ${this.hi.limit.y}\n`+`scale: ${this.scale.value}`)}cancelOngoingMoves(){this.oi.destroy(e.it)}};Tilted=n.default})();