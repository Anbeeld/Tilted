var Tilted;(()=>{"use strict";var t,i,s,e,h,r={d:(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},n={};function o(t,i){return parseFloat(t.toFixed(i))}function a(t,i,s){return Math.min(s,Math.max(i,t))}function u(t){return a(t,-1,1)}function l(t,s=i.t){switch(s){case i.t:return t;case i.i:return Math.sqrt(1-Math.pow(t-1,2))}}function c(t,i,s,e){let h=[i],r=t/i,n=s-1,a=Math.pow(r,1/n);for(let t=1;t<s-1;t++)h.push(h[h.length-1]*a);h.push(t);for(let t=0;t<s;t++)h[t]=o(h[t],e);return h.reverse()}function d(t,i){return t.reduce((function(t,s){return Math.abs(s-i)<Math.abs(t-i)?s:t}))}r.d(n,{default:()=>S}),function(t){t.h="top",t.u="bottom",t.l="left",t.m="right",t.p="none"}(t||(t={})),function(t){t.t="linear",t.i="easeOutCirc"}(i||(i={})),function(t){t._="angle",t.v="color",t.T="integer",t.Number="number",t.$="length",t.M="time"}(s||(s={}));class f{static id(){return f.A++}static add(t){f.S.set(t.id,t)}static surface(t){return f.S.get(t)}}f.A=0,f.S=new Map;class g{get L(){return f.surface(this.P)}constructor(t){this.V=0,this.U=0,this.destroyed=!1,this.P=t,this.V=this.U=performance.now()}destroy(){this.destroyed=!0}}class m extends g{get O(){return{x:this.I.x+this.D.x.value*this.D.x.sign,y:this.I.y+this.D.y.value*this.D.y.sign}}get remaining(){return{x:(this.D.x.value-this.G.x)*this.D.x.sign,y:(this.D.y.value-this.G.y)*this.D.y.sign}}constructor(t,i,s,e){super(t),this.G={x:0,y:0},this.I={x:this.L.position.coords.x,y:this.L.position.coords.y},this.D={x:{value:Math.abs(i.x),sign:i.x>0?1:-1},y:{value:Math.abs(i.y),sign:i.y>0?1:-1}},this.N=s,this.R=e,this.L.k.C.Y&&console.log("Glide created: x "+this.D.x.value*this.D.x.sign+", y "+this.D.y.value*this.D.y.sign+", initial.x "+this.I.x+", initial.y "+this.I.y+", target.x "+this.O.x+", target.y "+this.O.y)}step(t){if(this.destroyed)return!1;let i=u((t-this.V)/this.N),s=u(l(i,this.R));if(s>=1)return this.L.k.C.Y&&console.log("Glide finished: "+(t-this.V)+"ms, surface.coords.x "+this.L.position.coords.x+", surface.coords.y "+this.L.position.coords.y+", target.x "+this.O.x+", target.y "+this.O.y),this.L.position.moveTo({x:this.O.x,y:this.O.y}),!1;{let i={x:0,y:0};return this.D.x.value>0&&this.D.x.value>this.G.x&&(i.x=o(Math.max(0,this.D.x.value*s-this.G.x),this.L.k.F.Y)),this.D.y.value>0&&this.D.y.value>this.G.y&&(i.y=o(Math.max(0,this.D.y.value*s-this.G.y),this.L.k.F.Y)),(i.x>0||i.y>0)&&(this.L.position.move({x:i.x*this.D.x.sign,y:i.y*this.D.y.sign},this.L.k.F.Y,this.L.k.F.Y),this.G.x=o(this.G.x+i.x,this.L.k.F.Y),this.G.y=o(this.G.y+i.y,this.L.k.F.Y),this.U=t),!0}}}class p extends g{get O(){return this.I+this.Z.value*this.Z.sign}get remaining(){return(this.Z.value-this.G)*this.Z.sign}constructor(t,i,s,e){super(t),this.G=0,this.I=this.L.scale.value,this.Z={value:Math.abs(i),sign:i>0?1:-1},this.N=s,this.R=e,this.L.k.C.Y&&console.log("Zoom created: shift "+this.Z.value+", initial "+this.I+", target "+this.O)}step(t){if(this.destroyed)return!1;let i=u((t-this.V)/this.N),s=u(l(i,this.R));if(s>=1)return this.L.k.C.Y&&console.log("Zoom finished: "+(t-this.V)+"ms, surface.scale.value "+this.L.scale.value+", target "+this.O),this.L.scale.changeTo(this.O),!1;{let i=0;return this.Z.value>0&&this.Z.value>this.G&&(i=o(Math.max(0,this.Z.value*s-this.G),this.L.k.X.Y)),i>0&&(this.L.scale.change(i*this.Z.sign),this.G=o(this.G+i,this.L.k.X.Y),this.U=t),!0}}}class x extends g{constructor(t,i){super(t),this.D=i}update(t){this.D.x!==t.x&&(this.D.x=t.x),this.D.y!==t.y&&(this.D.y=t.y)}step(t){if(this.destroyed)return!1;let i=Math.max(1,t-this.U)/10,s=this.L.k.j.Y*this.D.x/this.L.scale.value*i,e=this.L.k.j.Y*this.D.y/this.L.scale.value*i;return this.U=t,this.L.position.move({x:s,y:e})}}class E extends g{constructor(t,i){super(t),this.id=f.id(),this.B={x:0,y:0},this.H={x:0,y:0},this.L.cancelOngoingMoves(),this.B={x:i.x,y:i.y}}step(t){let i=this.L.position.move({x:(this.B.x-t.x)/this.L.scale.value,y:(this.B.y-t.y)/this.L.scale.value});return this.H={x:this.H.x+this.B.x-t.x,y:this.H.y+this.B.y-t.y},this.B={x:t.x,y:t.y},i}destroy(){performance.now()-this.V<this.L.k.W.Y&&this.q(),this.destroyed=!0}q(){this.L.position.glide({x:this.H.x*this.L.k.J.Y/this.L.scale.value,y:this.H.y*this.L.k.J.Y/this.L.scale.value},this.L.k.K.Y,i.i)}}!function(t){t.tt="surfaceGlide",t.it="surfaceZoom",t.st="surfaceEdge",t.et="surfaceDrag"}(e||(e={}));class y{get L(){return f.surface(this.P)}get surfaceGlide(){return this.ht}get surfaceZoom(){return this.rt}get surfaceEdge(){return this.nt}get surfaceDrag(){return this.ot}constructor(t){this.ht=null,this.rt=null,this.nt=null,this.ot=null,this.P=t}create(t,i){switch(t){case e.tt:this.ut(...i);break;case e.it:this.lt(...i);break;case e.st:this.ct(...i);break;case e.et:this.dt(...i)}this.L.animationExecutor.initiate()}destroy(t){switch(t){case e.tt:return this.ft();case e.it:return this.gt();case e.st:return this.xt();case e.et:return this.Et()}}exists(t){switch(t){case e.tt:return this.yt();case e.it:return this._t();case e.st:return this.vt();case e.et:return this.Tt()}}ut(t,i,s){this.ft(),this.ht=new m(this.L.id,t,i,s)}ft(){this.yt()&&(this.ht.destroy(),this.ht=null)}yt(){return null!==this.ht}lt(t,i,s){this.gt(),this.rt=new p(this.L.id,t,i,s)}gt(){this._t()&&(this.rt.destroy(),this.rt=null)}_t(){return null!==this.rt}ct(t){this.ft(),this.xt(),this.nt=new x(this.L.id,t)}xt(){this.vt()&&(this.nt.destroy(),this.nt=null)}vt(){return null!==this.nt}dt(t){this.Et(),this.ot=new E(this.L.id,t)}Et(){this.Tt()&&(this.ot.destroy(),this.ot=null)}Tt(){return null!==this.ot}}function _(t,i){let s=i.elements.container.getBoundingClientRect(),e=window.TouchEvent&&t instanceof TouchEvent;return{button:e?0:t.button,x:e?t.touches[0].clientX-s.left:t.clientX-s.left,y:e?t.touches[0].clientY-s.top:t.clientY-s.top}}function v(t,i){let s=_(t,i);0===s.button&&i.animationStorage.create(e.et,[s])}function T(i){i.elements.container.addEventListener("mousemove",(s=>{!function(i,s){1===s.k.$t.Y&&function(i,s){if(i.animationStorage.exists(e.et))return!1;let h={x:t.p,y:t.p};s.y<=i.k.Mt.Y?s.x<=i.k.Mt.Y?(h.x=t.l,h.y=t.h):s.x>=i.containerWidth-i.k.Mt.Y?(h.x=t.m,h.y=t.h):h.y=t.h:s.y>=i.containerHeight-i.k.Mt.Y?s.x<=i.k.Mt.Y?(h.x=t.l,h.y=t.u):s.x>=i.containerWidth-i.k.Mt.Y?(h.x=t.m,h.y=t.u):h.y=t.u:s.x<=i.k.Mt.Y?h.x=t.l:s.x>=i.containerWidth-i.k.Mt.Y&&(h.x=t.m);let r=0,n=0;h.y===t.p&&h.x===t.p||(h.y===t.h?n=(i.k.Mt.Y+1-s.y)/(i.k.Mt.Y+1)*-1:h.y===t.u&&(n=(i.k.Mt.Y+1-(i.containerHeight-s.y))/(i.k.Mt.Y+1)),h.x===t.l?r=(i.k.Mt.Y+1-s.x)/(i.k.Mt.Y+1)*-1:h.x===t.m&&(r=(i.k.Mt.Y+1-(i.containerWidth-s.x))/(i.k.Mt.Y+1)));let o=!1;(0===r||r>0&&i.position.coords.x>=i.position.max.x||r<0&&i.position.coords.x<=i.position.min.x)&&(o=!0);let a=!1;(0===n||n>0&&i.position.coords.y>=i.position.max.y||n<0&&i.position.coords.y<=i.position.min.y)&&(a=!0),o&&a?i.animationStorage.exists(e.st)&&i.animationStorage.destroy(e.st):i.animationStorage.exists(e.st)?i.animationStorage.surfaceEdge.update({x:r,y:n}):i.animationStorage.create(e.st,[{x:r,y:n}])}(s,_(i,s))}(s,i)})),i.elements.container.addEventListener("wheel",(t=>{!function(t,i){t.preventDefault(),i.scale.stepAndGlide(function(t){return{x:t.deltaX,y:t.deltaY}}(t).y<0?1:-1,_(t,i))}(t,i)})),function(t){function i(i){t.animationStorage.exists(e.et)&&t.animationStorage.surfaceDrag.step(_(i,t))}function s(){t.animationStorage.destroy(e.et)}t.elements.container.addEventListener("mousemove",i),t.elements.container.addEventListener("touchmove",i),document.body.addEventListener("mouseup",s),document.body.addEventListener("touchend",s)}(i),i.elements.container.addEventListener("mousedown",(t=>{v(t,i)})),i.elements.container.addEventListener("touchstart",(t=>{v(t,i)})),document.body.addEventListener("keydown",(t=>{!function(t,i){i.elements.container.matches(":hover")&&("Add"===t.key||"+"===t.key?i.scale.step(1):"Subtract"!==t.key&&"-"!==t.key||i.scale.step(-1))}(t,i)})),i.elements.controlsZoomIn.addEventListener("click",(()=>{i.scale.stepAndGlide(1)})),i.elements.controlsZoomOut.addEventListener("click",(()=>{i.scale.stepAndGlide(-1)})),i.elements.container.ondragstart=()=>!1}class ${get L(){return f.surface(this.P)}constructor(t){this.At=!1,this.P=t}initiate(){this.At||(this.At=!0,this.wt())}wt(){let t=performance.now();requestAnimationFrame((()=>{let i=this.bt(t),s=this.St(t),e=this.Lt(t);this.L.applyTransformProperty(),this.At=i||s||e,this.At&&this.wt()}))}bt(t){if(!this.L.animationStorage.exists(e.tt))return!1;let i=this.L.animationStorage.surfaceGlide.step(t);return i||this.L.animationStorage.destroy(e.tt),i}St(t){if(!this.L.animationStorage.exists(e.it))return!1;let i=this.L.animationStorage.surfaceZoom.step(t);return i||this.L.animationStorage.destroy(e.it),i}Lt(t){if(!this.L.animationStorage.exists(e.st))return!1;let i=this.L.animationStorage.surfaceEdge.step(t);return i||this.L.animationStorage.destroy(e.st),i}}function M(t){return"@property --tilted-container-width-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.containerWidth+"px;}@property --tilted-container-height-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.containerHeight+"px;}@property --tilted-surface-width-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.surfaceWidth+"px;}@property --tilted-surface-height-"+t.id+' {syntax:"<length>";inherits:true;initial-value:'+t.surfaceHeight+"px;}"}class A{get L(){return f.surface(this.P)}constructor(t){this.Pt=[],this.Vt=[],this.P=t,this.Pt=c(this.L.k.Ut.Y,this.L.k.Ot.Y,this.L.k.It.Y,this.L.k.X.Y),this.Vt=function(t,i){let s=[];for(let e=0;e<t.length;e++)s.push({up:e===t.length-1?0:o(t[e+1]-t[e],i),down:0===e?0:o(t[e]-t[e-1],i)});return s}(this.Pt,this.L.k.X.Y),this.Dt=this.Pt[this.L.k.zt.Y-1],this.L.updateRotate(this.Dt),this.Gt(!0)}get value(){return this.Dt}get Nt(){return this.L.animationStorage.exists(e.it)?this.L.animationStorage.surfaceZoom.remaining:0}get Rt(){return a(o(this.L.scale.value+this.Nt,this.L.k.X.Y),this.L.k.Ut.Y,this.L.k.Ot.Y)}Yt(t){return this.Pt.indexOf(d(this.Pt,null!=t?t:this.Dt))}Ct(t,i){return void 0===i&&(i=this.Rt),t?this.Vt[this.Yt(i)].up:this.Vt[this.Yt(i)].down}kt(t,i,s){void 0===s&&(s=this.Rt);let e=i?1:-1,h=i?s+this.L.scale.Ct(!0):s,r=15/this.L.k.It.Y*.105*this.L.k.Ft.Y/h;return{x:o((t.x-this.L.containerWidth/2)*r,this.L.k.Zt.Y)*e,y:o((t.y-this.L.containerHeight/2)*r,this.L.k.Zt.Y)*e}}Xt(t){return d(this.Pt,a(this.L.scale.value+this.Nt+t,this.L.k.Ut.Y,this.L.k.Ot.Y))-this.L.scale.value-this.Nt}Gt(t=!1){this.L.setTransformValues([{name:"scale",value:this.Dt.toString()},{name:"rotateX",value:this.L.rotate.x+"deg"}],t)}change(t,i=this.L.k.X.Y){if(0===t)return!1;if(i>=0&&(t=o(t,i)),0===t)return!1;let s;return s=i>=0?o(this.Dt+t,i):this.Dt+t,s=a(s,this.L.k.Ut.Y,this.L.k.Ot.Y),s!==this.Dt&&(this.Dt=s,this.L.updateRotate(),this.Gt(),!0)}changeTo(t,i=this.L.k.X.Y){return i>=0&&(t=o(t,i)),this.Dt!==t&&this.change(t-this.Dt,i)}zoom(t,s=this.L.k.jt.Y,h=i.i,r=this.L.k.X.Y){let n=t;if(0===t)return!1;if(0===(t=this.Xt(t)))return!1;if(r>=0&&(t=o(t,r)),0===t)return!1;let a=t;return t+=this.Nt,s*=u(Math.abs(t/n)),this.L.animationStorage.create(e.it,[t,s,h]),{new:a,combined:t,time:s}}zoomTo(t,s=this.L.k.jt.Y,e=i.i){return this.Dt!==t&&!1!==this.zoom(t-this.Dt,s,e,-1)}step(t){let i=t>0;return!1!==this.L.scale.zoom(t*this.L.scale.Ct(i))}stepAndGlide(t,i=null){let s=t>0;if(s&&this.Rt===this.L.k.Ot.Y||!s&&this.Rt===this.L.k.Ut.Y)return;let h=this.Ct(s),r=this.Rt,n=t*h,o=this.zoom(n);if(!1!==o&&null!==i&&!this.L.animationStorage.exists(e.st)){let t=this.L.scale.kt(i,s,r),e=Math.abs(o.new/n);t.x*=e,t.y*=e,this.L.position.glide(t,o.time)}}}class w{get L(){return f.surface(this.P)}get coords(){return{x:this.Bt.x,y:this.Bt.y}}constructor(t){this.Bt={x:0,y:0},this.P=t}get Ht(){return{x:Math.round(this.L.surfaceWidth/2-.25*this.L.containerWidth),y:Math.round(this.L.surfaceHeight/2-.25*this.L.containerHeight)}}get limit(){return this.Ht}get min(){return{x:-1*this.Ht.x,y:-1*this.Ht.y}}get max(){return{x:this.Ht.x,y:this.Ht.y}}get Nt(){return this.L.animationStorage.exists(e.tt)?this.L.animationStorage.surfaceGlide.remaining:{x:0,y:0}}move(t,i=this.L.k.F.Y,s=this.L.k.Zt.Y){if(0===t.x&&0===t.y)return!1;if(i>=0&&(t.x=o(t.x,i),t.y=o(t.y,i)),0===t.x&&0===t.y)return!1;let e;return e=s>=0?{x:o(this.Bt.x+t.x,s),y:o(this.Bt.y+t.y,s)}:{x:this.Bt.x+t.x,y:this.Bt.y+t.y},e={x:a(e.x,this.min.x,this.max.x),y:a(e.y,this.min.y,this.max.y)},(e.x!==this.Bt.x||e.y!==this.Bt.y)&&(this.Bt=e,this.L.setTransformValues([{name:"translate3d",value:-1*this.Bt.x+"px, "+-1*this.Bt.y+"px, 0"}]),!0)}moveTo(t,i=this.L.k.Zt.Y){return i>=0&&(t={x:o(t.x,i),y:o(t.y,i)}),(this.Bt.x!==t.x||this.Bt.y!==t.y)&&this.move({x:t.x-this.Bt.x,y:t.y-this.Bt.y},-1,i)}glide(t,s=this.L.k.Wt.Y,h=i.i,r=this.L.k.F.Y,n=this.L.k.Zt.Y){if(0===t.x&&0===t.y)return!1;if(r>=0&&(t={x:o(t.x,r),y:o(t.y,r)}),0===t.x&&0===t.y)return!1;let u;return u=n>=0?{x:o(this.Bt.x+t.x,n),y:o(this.Bt.y+t.y,n)}:{x:this.Bt.x+t.x,y:this.Bt.y+t.y},!(0===(t={x:a(u.x,this.min.x,this.max.x)-this.Bt.x,y:a(u.y,this.min.y,this.max.y)-this.Bt.y}).x&&0===t.y||(r>=0&&(t={x:o(t.x,r),y:o(t.y,r)}),0===t.x&&0===t.y||(this.L.k.C.Y&&this.L.log([{desc:"glide coords.x",to:t.x},{desc:"glide coords.y",to:t.y}]),t={x:o(t.x+this.Nt.x,r),y:o(t.y+this.Nt.y,r)},this.L.animationStorage.create(e.tt,[{x:t.x,y:t.y},s,h]),0)))}glideTo(t,s=this.L.k.Wt.Y,e=i.i,h=this.L.k.Zt.Y){return h>=0&&(t={x:o(t.x,h),y:o(t.y,h)}),(this.Bt.x!==t.x||this.Bt.y!==t.y)&&this.glide({x:t.x-this.Bt.x,y:t.y-this.Bt.y},s,e,-1,h)}enforceLimits(){this.moveTo({x:a(this.Bt.x,this.min.x,this.max.x),y:a(this.Bt.y,this.min.y,this.max.y)})}}!function(t){t.qt="scene",t.Jt="figure"}(h||(h={}));class b{get L(){return f.surface(this.P)}constructor(t,i){if(this.A=f.id(),this.P=t,this.Kt=i.type,this.Qt=i.factor||1,this.ti=i.element,!this.L.elements.transform.contains(this.ti))throw new Error(`Tilted id ${this.L.id} transform element doesn't contain entity id ${this.A} element`);let s;for(this.Kt===h.qt?(this.ti.classList.add(`tilted-${this.P}-scene`),this.ti.classList.add(`tilted-${this.P}-scene-${this.A}`)):this.Kt===h.Jt&&(this.ti.classList.add(`tilted-${this.P}-figure`),this.ti.classList.add(`tilted-${this.P}-figure-${this.A}`)),this.Kt===h.qt?s=this.ti:this.Kt===h.Jt&&(s=this.ti.parentElement);s!==this.L.elements.transform;){if(!s)throw new Error(`Couldn't reach Tilted id ${this.L.id} transform element from entity id ${this.A}`);s.classList.add(`tilted-${this.P}-preserve-3d`),s=s.parentElement}}ii(){this.si||(this.si=document.createElement("style"),this.si.classList.add(`tilted-${this.L.id}-css-${this.Kt}-${this.A}`),document.head.appendChild(this.si))}applyTransformProperty(t){let i=`rotateX(-${1===this.Qt?t:(s=t,e=this.Qt,r=this.L.k.ei.Y,o(parseFloat(s.replace("deg",""))*e,r)+"deg")})`;var s,e,r;if(this.Kt===h.qt){this.ii();let t=`.tilted-${this.P}-scene-${this.A}>*:not(.tilted-${this.P}-figure){transform:${i}}`;this.si.innerHTML!==t&&(this.si.innerHTML=t)}else this.Kt===h.Jt&&(this.ti.style.transform=i)}}const S=class{get id(){return this.A}get elements(){return this.hi}get position(){return this.ri}get scale(){return this.ni}get animationExecutor(){return this.oi}get animationStorage(){return this.ai}get rotate(){return{x:this.ui.x,y:this.ui.y}}constructor(t,i,e={},h=[]){this.li={x:0,y:0},this.ui={x:0,y:0},this.A=f.id(),f.add(this),this.k=function(t){let i={debugMode:0,scaleMin:.25,scaleMax:1,scaleNumSteps:15,scaleDefaultStep:8,scaleRounding:3,scaleGlideFactor:1,perspectiveValue:750,perspectiveFactor:1,tiltMin:0,tiltMax:35,tiltRounding:2,edgeMoveEnabled:0,edgeMoveArea:20,edgeMoveSpeed:10,animationScaleTime:400,animationGlideTime:400,durationForToss:150,tossGlideFactor:1,animationTossTime:1e3,coordRoundingInterim:1,coordRoundingFinal:0};for(const s in t)if(i.hasOwnProperty(s)){let e=t[s];!0===e?e=1:!1===e&&(e=0),i[s]=e}let e=c(i.scaleMin,i.scaleMax,i.scaleNumSteps,i.scaleRounding);return i.debugMode&&console.log("Scale steps: ",e),{C:{Y:i.debugMode,ci:s.T},Ut:{Y:i.scaleMin,ci:s.Number},Ot:{Y:i.scaleMax,ci:s.Number},It:{Y:i.scaleNumSteps,ci:s.Number},zt:{Y:i.scaleDefaultStep,ci:s.Number},X:{Y:i.scaleRounding,ci:s.Number},Ft:{Y:i.scaleGlideFactor,ci:s.Number},di:{Y:i.perspectiveValue,ci:s.T},fi:{Y:Math.round(i.perspectiveFactor),ci:s.$},gi:{Y:Math.round(i.tiltMin),ci:s._},mi:{Y:Math.round(i.tiltMax),ci:s._},ei:{Y:i.tiltRounding,ci:s.T},$t:{Y:i.edgeMoveEnabled,ci:s.T},Mt:{Y:Math.round(i.edgeMoveArea),ci:s.$},j:{Y:Math.round(i.edgeMoveSpeed),ci:s.$},jt:{Y:Math.round(i.animationScaleTime),ci:s.M},Wt:{Y:Math.round(i.animationGlideTime),ci:s.M},W:{Y:Math.round(i.durationForToss),ci:s.M},J:{Y:i.tossGlideFactor,ci:s.Number},K:{Y:Math.round(i.animationTossTime),ci:s.M},F:{Y:i.coordRoundingInterim,ci:s.T},Zt:{Y:i.coordRoundingFinal,ci:s.T}}}(e),this.hi=this.pi(t,i),this.xi=this.Ei(),this.yi={changed:!1,values:{scale:"",perspective:"",rotateX:"",translate3d:"0, 0, 0"}},this.ai=new y(this.id),this.oi=new $(this.id),T(this),this._i(),new ResizeObserver((()=>{this.Ti(),this._i(),this.ri.enforceLimits()})).observe(this.elements.container),new ResizeObserver((()=>{this.Ti(),this.ri.enforceLimits()})).observe(this.elements.surface),this.$i=[];for(let t of h)this.$i.push(new b(this.id,t));this.ri=new w(this.id),this.Mi(),this.ni=new A(this.id)}pi(t,i){t.classList.add(`tilted-${this.id}-container`);let s=document.createElement("div");s.classList.add(`tilted-${this.id}-viewport`);let e=document.createElement("div");e.classList.add(`tilted-${this.id}-transform`),e.classList.add(`tilted-${this.id}-preserve-3d`),i.classList.add(`tilted-${this.id}-surface`);let h=document.createElement("div");h.classList.add(`tilted-${this.id}-controls`);let r=document.createElement("div");r.classList.add(`tilted-${this.id}-controls-zoom-in`);let n=document.createElement("div");n.classList.add(`tilted-${this.id}-controls-zoom-out`),h.appendChild(r),h.appendChild(n);let o=new Array;for(let i of t.children)o.push(i);for(let t of o)e.appendChild(t);return i.parentElement!==e&&e.appendChild(i),s.appendChild(e),t.appendChild(s),t.appendChild(h),{container:t,controls:h,controlsZoomIn:r,controlsZoomOut:n,viewport:s,transform:e,surface:i}}Ei(){let t=document.createElement("style");t.classList.add(`tilted-${this.id}-css-static`),t.innerHTML=function(t){let i="";for(const s in t.k){let e="";"length"===t.k[s].ci?e="px":"angle"===t.k[s].ci?e="deg":"time"===t.k[s].ci&&(e="ms"),i+=`@property --${s} { `,i+=`syntax:"<${t.k[s].ci}>"; `,i+="inherits:true; ",i+=`initial-value:${t.k[s].Y}${e}; } `}return i+=`.tilted-${t.id}-container{position:relative !important;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tilted-${t.id}-container:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing;}.tilted-${t.id}-controls{position:absolute;top:100px;right:30px;width:30px;border-radius:8px;box-shadow:rgba(0, 0, 0, 0.16) 0px 1px 4px;box-sizing:content-box;overflow:hidden;}.tilted-${t.id}-controls-zoom-in,.tilted-${t.id}-controls-zoom-out{position:relative;width:30px;height:30px;background:#ffffffcc;cursor:pointer;box-sizing:content-box;}.tilted-${t.id}-controls-zoom-in{border-bottom:1px solid #444444;}.tilted-${t.id}-controls-zoom-in:active,.tilted-${t.id}-controls-zoom-out:active{background:#ffffff;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-in:after,.tilted-${t.id}-controls-zoom-out:before{content:"";display:block;position:absolute;background:#444444;}.tilted-${t.id}-controls-zoom-in:before,.tilted-${t.id}-controls-zoom-out:before{height:2px;width:18px;top:14px;left:6px;}.tilted-${t.id}-controls-zoom-in:after{height:18px;width:2px;top:6px;left:14px;}.tilted-${t.id}-viewport{width:var(--tilted-surface-width-`+t.id+") !important;height:var(--tilted-surface-height-"+t.id+") !important;position:relative !important;will-change:top,left;}"+`.tilted-${t.id}-transform{width:var(--tilted-surface-width-`+t.id+") !important;height:var(--tilted-surface-height-"+t.id+") !important;will-change:transform;}"+`.tilted-${t.id}-surface{position:relative !important;overflow:visible !important;z-index:100 !important;}`+`.tilted-${t.id}-scene>*:not(.tilted-${t.id}-figure),`+`.tilted-${t.id}-figure{transform-origin:bottom;}`+`.tilted-${t.id}-preserve-3d{transform-style:preserve-3d;}`,i}(this),document.head.appendChild(t);let i=document.createElement("style");return i.classList.add(`tilted-${this.id}-css-dynamic`),i.innerHTML=M(this),document.head.appendChild(i),{static:t,dynamic:i}}Ti(){this.xi.dynamic.innerHTML=M(this)}get containerWidth(){return this.elements.container.offsetWidth}get containerHeight(){return this.elements.container.offsetHeight}get surfaceWidth(){return this.elements.surface.offsetWidth}get surfaceHeight(){return this.elements.surface.offsetHeight}setTransformValues(t,i=!1){for(let{name:i,value:s}of t)this.yi.values.hasOwnProperty(i)&&(this.yi.values[i]=s);i?this.applyTransformProperty(!0):(this.yi.changed=!0,this.oi.initiate())}applyTransformProperty(t=!1){if(this.yi.changed||t){this.yi.changed=!1,this.hi.transform.style.transform=`scale(${this.yi.values.scale}) perspective(${this.yi.values.perspective}) rotateX(${this.yi.values.rotateX}) translate3d(${this.yi.values.translate3d})`;for(let t of this.$i)t.applyTransformProperty(this.yi.values.rotateX)}}_i(){this.li={x:0-this.surfaceWidth/2+this.containerWidth/2,y:0-this.surfaceHeight/2+this.containerHeight/2},this.elements.viewport.style.top=this.li.y+"px",this.elements.viewport.style.left=this.li.x+"px"}Mi(){this.setTransformValues([{name:"perspective",value:Math.round(this.k.di.Y*this.k.fi.Y).toString()+"px"}])}updateRotate(t=null){null===t&&(t=this.scale.value);let i=(t-this.k.Ut.Y)/(this.k.Ot.Y-this.k.Ut.Y);this.ui={x:o(this.k.gi.Y+i*(this.k.mi.Y-this.k.gi.Y),this.k.ei.Y),y:0}}log(t=!1){if(0===this.k.C.Y)return;let i="";if(t)for(let s of t)i+=s.desc+(void 0!==s.from?" from "+s.from:"")+(void 0!==s.to?" to "+s.to:"")+"\n";console.log(i+`x: ${this.ri.coords.x}\n`+`y: ${this.ri.coords.y}\n`+`limit.x: ${this.ri.limit.x}\n`+`limit.y: ${this.ri.limit.y}\n`+`scale: ${this.scale.value}`)}cancelOngoingMoves(){this.ai.destroy(e.tt)}};Tilted=n.default})();